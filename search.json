[{"title":"ğŸ”¥Vue2çš„åŸºæœ¬ä½¿ç”¨å’ŒåŸå‹è®¾è®¡","path":"//posts/vue2-constructor.html","content":"&emsp;&emsp;åœ¨å‰é¢ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰äº†æºç çš„ç›®å½•ç»“æ„ä»¥åŠæ„å»ºæ–¹å¼ã€‚ &emsp;&emsp;ä»Šå¤©æˆ‘ä»¬ç»§ç»­æ¥è¯´ä¸‹Vueçš„åŸå‹è®¾è®¡ã€‚ ä¸€ã€Vueçš„åŸºç¡€ä½¿ç”¨å®˜æ–¹æ¨è Vue çš„ä½¿ç”¨æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼šé€šè¿‡ CDN å’Œ NPMã€‚ ä½¿ç”¨ CDNï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ HTML ä¸­æ·»åŠ  &lt;script&gt; æ ‡ç­¾ç›´æ¥å¼•å…¥æ‰“åŒ…å¥½çš„ vue.js æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ç§å¿«é€Ÿä¸”ç®€ä¾¿çš„æ–¹æ³•ã€‚ 12// CDNæ–¹å¼&lt;script src=&quot;vue.js&quot;&gt;&lt;/script&gt; è€Œ NPM æ–¹å¼åˆ™æ¶‰åŠåˆ°ä¸æ¨¡å—æ‰“åŒ…å·¥å…·å¦‚ webpack æˆ– Browserify çš„é›†æˆï¼Œé€šè¿‡æ‰§è¡Œ npm install vue å‘½ä»¤æ¥å®‰è£… Vueï¼Œè¿™é€šå¸¸æ˜¯æˆ‘ä»¬åœ¨å¼€å‘å¤§å‹åº”ç”¨æ—¶çš„é¦–é€‰æ–¹å¼ã€‚ 12// NPMæ–¹å¼import Vue from &#x27;vue&#x27;; å½“Vueè¢«å¼•å…¥æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåœ¨å…¥å£æ–‡ä»¶ä¸­å» new ä¸€ä¸ªVueå®ä¾‹ã€‚ ç„¶åå†åˆ©ç”¨å®ä¾‹ä¸Šçš„$mountæ–¹æ³•å°†å¯¹åº”çš„æ¨¡ç‰ˆå†…å®¹æŒ‚è½½åˆ°æµè§ˆå™¨ä¸­#appèŠ‚ç‚¹çš„ä½ç½®ä¸Šã€‚ 12345678// NPMæ–¹å¼// Nodejsç‰ˆæœ¬import Vue from &#x27;vue/dist/vue.common&#x27;;// éœ€è¦å®ä¾‹åŒ– Vuenew Vue(&#123; template:`&lt;div&gt;Hello World&lt;/div&gt;`&#125;).$mount(&quot;#app&quot;); äºŒã€ä¸ºä»€ä¹ˆVueä¸æ˜¯ä¸€ä¸ªç±»ä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´äº†ä½¿ç”¨ Vue éœ€è¦ new ä¸€ä¸‹ã€‚ æ‰€ä»¥ä½ å¯èƒ½ä¼šä¹ æƒ¯æ€§çš„è®¤ä¸º Vue æ˜¯ä¸€ä¸ªç±»ã€‚ ä½†æ˜¯æˆ‘ä»¬æ‰“å¼€Vueè¢«å®šä¹‰çš„core/instance/index.jsæ–‡ä»¶ã€‚ 123456function Vue(options) &#123; if (__DEV__ &amp;&amp; !(this instanceof Vue)) &#123; warn(&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;) &#125; this._init(options)&#125; ä¼šå‘ç°Vueæ˜¯ä½¿ç”¨å‡½æ•°å®šä¹‰çš„ã€‚ é‚£ä¹ˆVueæºç ä¸­ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ç±»å‘¢ï¼Ÿ åœ¨Vueä¸­æœ‰å¤§é‡çš„æ‰©å±•å®ä¾‹å±æ€§çš„æ“ä½œå¦‚ï¼šVue.prototype.$mount=xxxã€‚ å…¶å®æœ¬è´¨ä¸Šç±»åªæ˜¯functionçš„è¯­æ³•ç³–ã€‚ è™½ç„¶è¯´ä½¿ç”¨ç±»ä¹Ÿå¯ä»¥è¿›è¡Œæ‰©å±•ï¼š 123456class Animate&#123;&#125;Animate.prototype.eat = function()&#123; console.log(&quot;åŠ¨ç‰©åƒä¸œè¥¿&quot;)&#125;new Animate().eat();// åŠ¨ç‰©åƒä¸œè¥¿ ä½†æ˜¯ç”¨ç±»å’ŒåŸå‹è¿™ä¹ˆæ··åˆä½¿ç”¨ï¼Œéš¾å…ä¼šè®©äººæ„Ÿåˆ°ä¸é€‚ï¼Œä¹Ÿç®—æ˜¯ä¸€ç§å¼€å‘è§„èŒƒå’Œä¹ æƒ¯å§ã€‚ å¤§éƒ¨åˆ†å¼€æºåº“ä¾æ—§ä½¿ç”¨çš„æ˜¯æ„é€ å‡½æ•°functionçš„æ–¹å¼ã€‚ ä¸‰ã€å¿…é¡»ä½¿ç”¨newå…³é”®å­—æ¥è°ƒç”¨å¯ä»¥çœ‹åˆ°åœ¨Vueæ„é€ å‡½æ•°å†…éƒ¨å­˜åœ¨ä¸€ä¸ªåˆ¤æ–­ this instanceof Vueï¼Œé‚£ä¹ˆè¿™è¡Œä»£ç åº”è¯¥å¦‚ä½•ç†è§£å‘¢ï¼Ÿ æˆ‘ä»¬çŸ¥é“é€šè¿‡ instanceofå¯ä»¥é¡ºç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾å¯¹åº”çš„æ„é€ å‡½æ•°ã€‚ æ‰€ä»¥è¿™ä¸ªåˆ¤æ–­çš„æ„æ€å°±æ˜¯æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ï¼ˆthisï¼‰æ˜¯å¦æ˜¯ä¸€ä¸ª Vueå®ä¾‹ã€‚ å¦‚æœä¸æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå°±ä¼šç»™ä½ ä¸€ä¸ªè­¦å‘Šã€‚ è¿™è¦å‘ŠçŸ¥å¼€å‘è€…Vueåº”è¯¥è¦ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°æ¥ä½¿ç”¨ã€‚ 123456// instance/index.jsfunction Vue(options) &#123; if(__DEV__ &amp;&amp; !this instanceof Vue)&#123; warn(&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;) &#125;&#125; å‡è®¾ä½ è¿™ä¹ˆä½¿ç”¨ Vueï¼š 1const vm = Vue() é‚£ä¹ˆä½ å°†ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ä¸€æ¡æŠ¥é”™ä¿¡æ¯ã€‚ å››ã€Vueçš„åŸå‹è®¾è®¡Vueæ˜¯ä¸€ä¸ªåŸºäºåŸå‹è®¾è®¡çš„å‰ç«¯æ¡†æ¶ã€‚ åœ¨Vueè¢«å¼•å…¥ import Vue from vueæ—¶ï¼Œä¼šé€šè¿‡å¤šä¸ªå‡½æ•°åœ¨VueåŸå‹ä¸Šæ·»åŠ ä¸Šä¸€ç³»åˆ—çš„æ–¹æ³•ã€‚ 123456// è¯¥å‡½æ•°åœ¨ Vueè¢«å¼•å…¥æ—¶æ‰§è¡Œexport function lifecycleMixin(Vue)&#123; Vue.prototype._update = ()=&gt;&#123; // xxxx &#125;&#125; é‚£ä¹ˆåœ¨Vue.prototypeä¸Šå®šä¹‰æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ å‰é¢2èŠ‚ï¼Œæˆ‘ä»¬è¯´åˆ° Vueæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š 123function Vue()&#123; //xxx&#125; æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ newå…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ª vueå®ä¾‹ã€‚ 1const vm = new Vue(); æ„é€ å‡½æ•°ä¸åŸå‹å¯¹è±¡ï¼šæ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototypeå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡è¢«å«åšåŸå‹å¯¹è±¡ï¼ŒåŒ…å«äº†ç”±è¯¥æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å…±äº«å±æ€§å’Œæ–¹æ³•ã€‚å®ä¾‹å¯¹è±¡çš„ __proto__ å±æ€§ï¼šæ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª __proto__ å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼šVueæ„é€ å‡½æ•°çš„æ˜¾å¼åŸå‹ï¼ˆVue.prototypeï¼‰å’ŒåŸºäºå®ƒåˆ›å»ºçš„å®ä¾‹çš„éšå¼åŸå‹ï¼ˆvm.__proto__ï¼‰æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ç©ºé—´ã€‚ å½“ Vueå®ä¾‹è®¿é—®æŸä¸ªå±æ€§æ—¶ï¼Œå¦‚æœåœ¨è‡ªèº«å±æ€§ä¸­æ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šæ²¿ç€__proto__å±æ€§æŒ‡å‘çš„åŸå‹å¯¹è±¡è¿›è¡ŒæŸ¥æ‰¾ã€‚æ‰€ä»¥é€šè¿‡ vm å¯ä»¥è®¿é—®åˆ°å®šä¹‰åœ¨ Vue.prototype çš„å±æ€§å’Œæ–¹æ³•ã€‚ é€šç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰©å±•æ–¹æ³•ï¼Œå¹¶ä¸ç”¨æ˜¾ç¤ºçš„åœ¨ vm ä¸Šè®¾ç½®æ–¹æ³•ï¼Œåšåˆ°äº†ç›¸å¯¹éš”ç¦»ã€‚ äº”ã€Vue.extendåˆ©ç”¨åŸå‹é“¾ç»§æ‰¿ç”Ÿæˆâ€œå­ç±»â€œæ„é€ å‡½æ•°Vue.extendæ˜¯å®šä¹‰åœ¨Vueè¿™ä¸ªæ„é€ å‡½æ•°ä¸Šçš„æ–¹æ³•ã€‚ è¯¥æ–¹æ³•ä¸»è¦ç”¨äºåˆ›å»ºVueæ„é€ å‡½æ•°çš„â€œå­ç±»â€œï¼Œè¯¥â€œå­ç±»â€œç»§æ‰¿ Vueæ„é€ å‡½æ•°ä¸Šçš„åŸå‹æ–¹æ³•å’ŒåŸå‹å±æ€§ã€‚ è™½ç„¶Vueåœ¨æŠ€æœ¯ä¸Šä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ç±»ï¼Œä½†æ˜¯Vue.extendæä¾›äº†ä¸€ç§ç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ç»§æ‰¿çš„æ–¹å¼æ¥å®šä¹‰ç»„ä»¶ã€‚ 123456789101112131415// å¯¹åŸå‡½æ•°è¿›è¡Œäº†ä¸€äº›ç®€åŒ– åªä¿ç•™äº†æ ¸å¿ƒVue.extend = function()&#123; // this ä¸º Vueæ„é€ å‡½æ•° const Super = this; // Sub ä¸º VueComponentæ„é€ å‡½æ•°ï¼Œä»£è¡¨ç»„ä»¶æ„é€ å‡½æ•° const Sub = function VueComponent(this)&#123; // å’Œ Vueæ„é€ å‡½æ•°ä¸€æ · ä¼šè°ƒç”¨_initæ–¹æ³• this._init(options); &#125;; // åŸºäº Vue.prototype åˆ›å»ºä¸€å—æ–°çš„å†…å­˜ï¼Œå…±äº«å…¶å±æ€§å’Œæ–¹æ³•ã€‚ Sub.prototype = Object.create(Super.prototype); // ä¿®æ­£ constructoræŒ‡å‘ Sub.prototype.constructor = Sub; return Sub;&#125; æˆ‘ä»¬ç®€å•çš„åˆ†æä¸€ä¸‹è¿™å‡ è¡Œä»£ç ã€‚ å£°æ˜äº†Superå˜é‡å’Œ Subå˜é‡åˆ†åˆ«æŒ‡å‘Vueæ„é€ å‡½æ•°å’Œ VueComponentæ„é€ å‡½æ•°ã€‚ 5.1 ä½¿ç”¨åœºæ™¯åœ¨Vueæºç å†…éƒ¨å’Œä½¿ç”¨Vueç¼–å†™ä¸šåŠ¡ä»£ç æ—¶éƒ½å¯ä»¥ä½¿ç”¨ Vue.extendè¿™ä¸ª apiã€‚ 5.1.1 å†…éƒ¨åˆ›å»ºç»„ä»¶æ¯ä¸€ä¸ªVueç»„ä»¶éƒ½å¯¹åº”ç€ä¸€ä¸ªå®ä¾‹ã€‚ è€Œè¿™äº›å®ä¾‹éƒ½æ˜¯é€šè¿‡ extend æ–¹æ³•åˆ›å»ºçš„ VueComponentæ„é€ å‡½æ•° ç”Ÿæˆçš„ã€‚ åœ¨renderé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯åœ¨ç”Ÿæˆç»„ä»¶çš„vnodeçš„æ—¶å€™ä¼šé€šè¿‡ extend æ–¹æ³•åˆ›å»ºVueComponentæ„é€ å‡½æ•°ã€‚ å¹¶èµ‹å€¼åˆ° vnode ä¸­çš„ componentOptionså±æ€§ä¸­ã€‚ 1234567891011// åˆ›å»ºç»„ä»¶çš„ vnode çš„æ–¹æ³•export function createComponent(Ctor,context)&#123; // _baseåœ¨å¼•å…¥æ—¶è¢«è®¾ç½®ä¸º Vue // è¿™é‡Œçš„optionsåé¢æˆ‘ä»¬ä¼šè¯¦ç»†è¯´æ˜ const base = context.$options._base; // åˆ›å»ºVueå­ç±»æ„é€ å‡½æ•° Ctor = base.extend(); return new Vnode( &#123;componentOptions:&#123;Ctor&#125;&#125; )&#125; è¿™é‡Œçš„_baseå®é™…ä¸Šå°±æ˜¯ Vueã€‚è¿™é‡Œçš„ contextæ˜¯vmå®ä¾‹ï¼Œvm.$optionsæ˜¯åœ¨å®ä¾‹åŒ–æ„é€ å‡½æ•°æ—¶é€šè¿‡ mergeOptionså‡½æ•°ç”Ÿæˆçš„ã€‚ ç„¶ååœ¨updateé˜¶æ®µï¼ˆæ¸²æŸ“é¡µé¢ï¼‰ï¼Œä¼šåŸºäºCtorç”Ÿæˆå¯¹åº”çš„å®ä¾‹ï¼Œæ‰§è¡Œç›¸åº”çš„åˆå§‹åŒ–ã€æ¸²æŸ“æ–¹æ³•ç­‰ã€‚ 12345// æ¯ä¸ªç»„ä»¶éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åˆ›å»ºå¯¹åº”çš„å®ä¾‹// è¿™é‡Œçš„ componentOptions.Ctor å°±æ˜¯å¯¹åº”çš„VueComponentæ„é€ å‡½æ•°export function createComponentInstanceForVnode(vnode)&#123; return new vnode.componentOptions.Ctor()&#125; 5.1.2 åœ¨ä¸šåŠ¡ä¸­çš„å®é™…åº”ç”¨åœºæ™¯åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹éƒ½å¯ä»¥åˆ©ç”¨ extend æ¥æ‰©å±•ç»„ä»¶ã€‚ åŒ…æ‹¬åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶ã€åŠ¨æ€ç»„ä»¶ã€å…¨å±€å’Œå±€éƒ¨æ³¨å†Œã€ä¸´æ—¶ç»„ä»¶ã€è‡ªå®šä¹‰æŒ‡ä»¤å’Œæ’ä»¶ã€‚ æˆ‘ä»¬å¸¸ç”¨çš„ Elementæ¡†æ¶å†…éƒ¨å°±åˆ©ç”¨äº† Vue.extend æ¥æ‰©å±•æŸäº›ä¸´æ—¶æ€§çš„ç»„ä»¶ï¼Œä¾‹å¦‚æ¨¡æ€å¯¹è¯æ¡†ã€æç¤ºä¿¡æ¯ç­‰ã€‚ é€šè¿‡ Vue.extend åˆ›å»ºçš„ç»„ä»¶æ„é€ å‡½æ•°å¯ä»¥æŒ‰éœ€åˆ›å»ºå’Œé”€æ¯ï¼Œé€‚åˆè¿™ç±»ä¸´æ—¶ç»„ä»¶çš„ç®¡ç†ã€‚ 123456789101112131415161718const Main = &#123; template:&#x27;&lt;div&gt;hello main&lt;/div&gt;&#x27;&#125;const NotificationConstructor = Vue.extend(Main);let instance;const Notification = function() &#123; // é€šè¿‡VueComponentåˆ›å»ºç»„ä»¶å®ä¾‹ instance = new NotificationConstructor(); // ä½¿ç”¨$mountå¯ä»¥åˆ›å»ºä¸€ä¸ªDOMèŠ‚ç‚¹ å¹¶æŒ‚è½½åˆ°instance.$elä¸Š instance.$mount(); document.body.appendChild(instance.$el); return instance;&#125; Notification(); $mountæ–¹æ³•å¦‚æœæ²¡æœ‰ä¼ å‚ä¸ä¼šæŒ‚è½½ï¼Œä½†æ˜¯ä¾æ—§å¯ä»¥ç”Ÿæˆ DOMèŠ‚ç‚¹ï¼Œå¹¶èµ‹å€¼åœ¨ vm.$elä¸Šã€‚ åœ¨ element ä¸­çš„ Notificationç»„ä»¶ å°±ä½¿ç”¨äº† extend è¿›è¡Œæ‰©å±•ã€‚ 5.1.3 ä½¿ç”¨VueComponentç»§ç»­æ‰©å±•å®ƒçš„â€œå­ç±»â€æ„é€ å‡½æ•°éœ€è¦å…³æ³¨çš„æ˜¯åœ¨Vue.extendä¸­ï¼Œå°†Vue.extendæ–¹æ³•åŒæ—¶èµ‹å€¼ç»™äº† VueComponentã€‚ æ„å‘³ç€èµ‹äºˆäº† VueComponentç»§ç»­æ‰©å±•çš„èƒ½åŠ›ï¼š 12345678Vue.extend = function()&#123; const Super = this; const Sub = function VueComponent()&#123; this._init(); &#125; // çœç•¥éƒ¨åˆ†ä»£ç  Sub.extend = Super.extend;&#125; è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ— é™çš„åŸºäº VueComponentå’Œå®ƒçš„â€œå­ç±»â€æ‰©å±•å­ç±»ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243import Vue from &quot;@/my-vue2/platforms/web/entry-runtime-with-compiler-esm&quot;// åŸºäºVueæ„é€ å‡½æ•°åˆ›å»ºçš„åŸºç¡€æ„é€ å‡½æ•°const VueComponentConstructor = Vue.extend(&#123; template:`&lt;div&gt;&#123;&#123; name &#125;&#125;æˆ‘æ˜¯æ„é€ å‡½æ•°&lt;/div&gt;`, data()&#123; return &#123; name:&quot;VueComponentConstructor&quot; &#125; &#125;&#125;);// å¯ä»¥å¤ç”¨çˆ¶ç±»æ„é€ å‡½æ•°VueComponentConstructorä¸Šçš„å±æ€§const VueComponentChild1Constructor = VueComponentConstructor.extend(&#123; data()&#123; return &#123; name:&quot;VueComponentChild1Constructor&quot; &#125; &#125;&#125;)// å¯ä»¥å¤ç”¨çˆ¶ç±»æ„é€ å‡½æ•°VueComponentConstructorä¸Šçš„å±æ€§const VueComponentChild2Constructor = VueComponentConstructor.extend(&#123; data()&#123; return &#123; name:&quot;VueComponentChild2Constructor&quot; &#125; &#125;&#125;)function addNode()&#123; const vm1 = new VueComponentConstructor(); const vm2 = new VueComponentChild1Constructor(); const vm3 = new VueComponentChild2Constructor(); vm1.$mount() vm2.$mount() vm3.$mount() document.body.appendChild(vm1.$el) document.body.appendChild(vm2.$el) document.body.appendChild(vm3.$el)&#125;addNode(); ä¸Šè¿°ä»£ç ä¸­ï¼ŒVueComponentConstructor æ˜¯é€šè¿‡ Vue.extend åˆ›å»ºçš„ä¸€ä¸ªåŸºç¡€ç»„ä»¶æ„é€ å‡½æ•°ã€‚ åœ¨è¿™ä¸ªåŸºç¡€æ„é€ å‡½æ•°ä¸­ä¼ å…¥äº†æ¨¡æ¿é€‰é¡¹ï¼Œæˆ‘ä»¬ä¹‹ååˆ›å»ºçš„æ„é€ å‡½æ•°å°±å¯ä»¥å¤ç”¨ templateé€‰é¡¹ï¼Œé¿å…ç¼–å†™é‡å¤çš„æ¨¡æ¿ã€‚ æˆ‘ä»¬è¿™é‡Œåªæ˜¯ç®€å•çš„ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬äº†è§£åˆ°äº†extendçš„é‡è¦æ„ä¹‰ã€‚çœŸå®çš„å¤ç”¨ç»“æ„è‚¯å®šæ›´ä¸ºå¤æ‚ã€‚ ä¸è¿‡åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬åº”ç”¨ä¸­åŸºæœ¬åªå­˜åœ¨ Vueæ„é€ å‡½æ•°å’Œå®ƒçš„ç›´æ¥æ„é€ å‡½æ•° VueComponentã€‚ åœ¨ç»„ä»¶åº“ç­‰åŸºç¡€åº“ä¸­å¯èƒ½ä¼šå­˜åœ¨è¿™ç§å­ç±»ç»§ç»­æ‰©å±•å­ç±»çš„æƒ…å†µã€‚ å…­ã€ä¸ºä»€ä¹ˆVueå®ä¾‹è¢«å«åš vmæºç ä¸­ä½ ä¼šçœ‹åˆ°å¤§é‡çš„ vmã€‚ ä½¿ç”¨ new Vue() åˆ›å»ºçš„Vueå®ä¾‹é€šå¸¸è¢«å«åš vmã€‚ Vueè¢«ç§°ä¸ºVMï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåŸºäºMVVMï¼ˆModel-View-ViewModelï¼‰æ¶æ„çš„å‰ç«¯æ¡†æ¶ã€‚ åœ¨MVVMæ¶æ„ä¸­ï¼ŒVMä»£è¡¨ViewModelï¼Œè´Ÿè´£ç®¡ç†è§†å›¾ï¼ˆViewï¼‰å’Œæ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ä¹‹é—´çš„é€šä¿¡å’Œäº¤äº’ã€‚ ä¸ƒã€å¼•å…¥æ—¶åŸºäºåŸå‹æŒ‚è½½æ–¹æ³•Vueæ˜¯åŸºäºåŸå‹è®¾è®¡çš„å‰ç«¯æ¡†æ¶ã€‚ åç»­çš„æ“ä½œéƒ½æ˜¯åœ¨è°ƒç”¨åŸå‹ä¸Šå®šä¹‰çš„æ–¹æ³•ã€‚ é‚£ä¹ˆ Vueæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™å¯¹è¿™äº›æ–¹æ³•è¿›è¡ŒæŒ‚è½½çš„å‘¢ï¼Ÿ ä¸€éƒ¨åˆ†æ˜¯åœ¨ Vueå¼•å…¥çš„æ—¶å€™æŒ‚è½½çš„ï¼Œä¸€éƒ¨åˆ†æ˜¯åœ¨ Vueå®ä¾‹åŒ–çš„æ—¶å€™è¿›è¡ŒæŒ‚è½½çš„ã€‚ é‚£ä¹ˆ Vueæ˜¯å¦‚ä½•åœ¨å¼•å…¥çš„æ—¶å€™è¿›è¡ŒæŒ‚è½½å‘¢ï¼Ÿ æˆ‘ä»¬æ‰“å¼€å…¥å£æ–‡ä»¶å¯ä»¥çœ‹åˆ° Vue è¢«æœ‰å±‚æ¬¡çš„å¯¼å…¥å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸Šå¯¹åº”çš„åŸå‹æ–¹æ³•ã€‚ æ¯”å¦‚åœ¨: åœ¨platforms/web/runtime-with-compiler.jsæ–‡ä»¶ä¸­ï¼š Vueä¸Šæ‰©å±•äº†å®šä¹‰äº†Vue.compile é‡å†™äº† Vue.prototype.$mount åœ¨platforms/web/runtime/index.jsæ–‡ä»¶ä¸­ï¼š å®šä¹‰äº†Vue.prototype.$mount å®šä¹‰äº†Vue.prototype.patch æ‰©å±•äº†æ‰©å±• Vue.configä¸€äº›å±æ€§ æ‰©å±• Vue.options.directive æ‰©å±• Vue.options.components åœ¨core/index.jsæ–‡ä»¶ä¸­ï¼š ä½¿ç”¨äº†initGlobalAPIå®šä¹‰äº†ä¸€äº›å…¨å±€æ–¹æ³• å¦‚ mixin å®šä¹‰äº†Vue.prototype.$isServer å®šä¹‰äº†Vue.prototype.$ssrContext å®šä¹‰äº†Vue.FunctionalRenderContext å®šä¹‰äº†Vue.version åœ¨core/instance/indexæ–‡ä»¶ä¸­ï¼š ä½¿ç”¨ initMixin æ³¨å…¥äº† åˆå§‹åŒ–æœ‰å…³çš„å±æ€§å¦‚ï¼šVue.prototype.$init ä½¿ç”¨ stateMixin æ³¨å…¥äº† è·ŸçŠ¶æ€æœ‰å…³çš„å±æ€§å¦‚ï¼šVue.prototype.$setã€Vue.prototype.$watchã€Vue.prototype.$delete ä½¿ç”¨ eventsMixin æ³¨å…¥äº† è·Ÿäº‹ä»¶æœ‰å…³çš„å±æ€§å¦‚ï¼šVue.prototype.$onã€Vue.prototype.$offã€Vue.prototype.$once ä½¿ç”¨ lifecycleMixin æ³¨å…¥äº† è·Ÿæ•´ä¸ª vueç”Ÿå‘½å‘¨æœŸæ›´æ–°æœ‰å…³çš„å±æ€§å¦‚ï¼šVue.prototype.$update ä½¿ç”¨ renderMixin æ³¨å…¥äº† è·Ÿæ¸²æŸ“ç›¸å…³çš„å±æ€§å¦‚ï¼šVue.prototype._render å¯ä»¥å‘ç° Vueæºç ä¸­æ˜¯ä¸€å±‚ä¸€å±‚è¿›è¡Œå¯¼å…¥ã€‚ é‚£ä¹ˆVueä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ç›®å½•ç»“æ„å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ¨¡å—éƒ½å¯¹ Vueå¯¹è±¡åšäº†ç›¸åº”çš„å¤„ç†ï¼Œæ¯”å¦‚è¯´æ‰©å±•å±æ€§ã€æ‰©å±•å®ä¾‹å±æ€§ç­‰ã€‚ Vue æŒ‰åŠŸèƒ½æŠŠè¿™äº›æ‰©å±•åˆ†æ•£åˆ°å¤šä¸ªæ¨¡å—ä¸­å»å®ç°ï¼Œè€Œä¸æ˜¯åœ¨ä¸€ä¸ªæ¨¡å—é‡Œå®ç°æ‰€æœ‰ã€‚ è¿™ç§æŠ€å·§ä¾¿äºåæœŸVueçš„ç»´æŠ¤å’Œè¿­ä»£ã€‚"},{"title":"ğŸ”¥Vue2æºç æ„å»º","path":"//posts/vue2-core-build.html","content":"&emsp;&emsp;åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¤§æ¦‚äº†è§£äº†Vueçš„ç›®å½•ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„ã€‚ &emsp;&emsp;åœ¨è¿™ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šçŸ¥æ™“ Vue æ˜¯å¦‚ä½•æ„å»ºçš„ã€‚ ä¸€ã€Vueçš„æ„å»º1.1 æ ¹æ®ä½¿ç”¨åœºæ™¯æ‰“åŒ…åœ¨ä¸Šä¸€ç¯‡ä¸“æ æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰äº† Vueæºç ä¸­çš„ä»£ç ç»“æ„ã€‚ å…¶ä¸­æˆ‘ä»¬ä»‹ç»äº†å‡ ä¸ªå…¥å£æ–‡ä»¶ï¼š entry-runtime.ts entry-runtime-with-compiler.ts entry-runtime-esm.ts entry-runtime-with-compiler-esm.ts åœ¨æˆ‘ä»¬å¼€å‘é¡¹ç›®ç»“æŸåï¼Œéœ€è¦è¿›è¡Œæ‰“åŒ…å¹¶éƒ¨ç½²åˆ°çº¿ä¸Šã€‚ é€šå¸¸æˆ‘ä»¬é¡¹ç›®æ‰“åŒ…æ—¶éœ€è¦ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œ webpacké€šè¿‡è¿™ä¸ªå…¥å£æ–‡ä»¶é€’å½’æ–‡ä»¶è¿›è¡Œä¾èµ–åˆ†æç„¶åæ‰“åŒ…ã€‚ å…¶å®æ¡†æ¶æ‰“åŒ…ä¹Ÿä¸€æ ·ï¼ŒåŒæ ·éœ€è¦ä¸€ä¸ªå…¥å£æ–‡ä»¶è¿›è¡Œé€’å½’ä¾èµ–åˆ†ææ‰“åŒ…ç”Ÿæˆ jsæ–‡ä»¶æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œä½¿ç”¨ã€‚ å’Œé¡¹ç›®ä¸ä¸€æ ·çš„æ˜¯ï¼Œé¡¹ç›®å¾€å¾€åªæœ‰ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œè€Œæ¡†æ¶ä¼šæ ¹æ®ä¸åŒçš„æƒ…å†µé‡‡ç”¨ä¸åŒçš„å…¥å£æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œä¸Šé¢çš„è¿™å››ä¸ªæ–‡ä»¶å°±æ˜¯Vueæ¡†æ¶çš„å…¥å£æ–‡ä»¶ã€‚ Vueæ˜¯ä½¿ç”¨rollupè¿›è¡Œæ‰“åŒ…çš„ã€‚ ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·è¿›è¡Œä½¿ç”¨ï¼ŒVueåœ¨ä½¿ç”¨rollupè¿›è¡Œæ‰“åŒ…æ—¶æ ¹æ®å¼€å‘ç¯å¢ƒ&#96;å’Œå¼€å‘æ¨¡å¼æ‰“åŒ…å‡ºäº†ä¸åŒåŠŸèƒ½çš„æ–‡ä»¶ï¼Œä»¥é€‚ç”¨äºä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚ æ„å»ºçš„rollupæ‰“åŒ…è„šæœ¬çš„ä»£ç åœ¨scripts/config.jsæ–‡ä»¶ä¸­ã€‚ 1234567891011121314151617const builds = &#123; &#x27;runtime-cjs-dev&#x27;: &#123; entry: resolve(&#x27;web/entry-runtime.ts&#x27;), dest: resolve(&#x27;dist/vue.runtime.common.dev.js&#x27;), format: &#x27;cjs&#x27;, env: &#x27;development&#x27;, banner &#125;, &#x27;runtime-cjs-prod&#x27;: &#123; entry: resolve(&#x27;web/entry-runtime.ts&#x27;), dest: resolve(&#x27;dist/vue.runtime.common.prod.js&#x27;), format: &#x27;cjs&#x27;, env: &#x27;production&#x27;, banner &#125;, // çœç•¥&#125; æ€»å…±æ‰“åŒ…ç”Ÿæˆ 12 ä¸ªæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚ æ ¹æ®æ˜¯å¦å¸¦ç¼–è¯‘å™¨çš„è§’åº¦ä¸Šåˆ†ä¸ºFullå’ŒRuntime-Only 2ä¸ªç‰ˆæœ¬ã€‚Fullç‰ˆæœ¬åŒ…å«ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶çš„å…¨éƒ¨åŠŸèƒ½ã€‚Runtime-Only ä»…å«è¿è¡Œæ—¶åŠŸèƒ½ã€‚ æ‰“åŒ…çš„æ–‡ä»¶æ ¹æ®ä½¿ç”¨åœºæ™¯åˆ†ä¸º esmã€cjsã€umdä¸‰ä¸ªç‰ˆæœ¬ã€‚å…¶ä¸­umdå¯ä»¥é€šè¿‡&lt;script&gt;æ ‡ç­¾å¼•å…¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼ŒVueä¼šæš´éœ²ä¸€ä¸ªå…¨å±€å˜é‡ Windows.Vueã€‚è€Œ CommonJSé€‚é…const Vue &#x3D; require(â€˜vueâ€™)è¿™ç§ nodeå¼çš„æ¨¡å—ç³»ç»Ÿã€‚ESåˆ™é€‚é…import Vue from â€˜vueâ€™è¿™ç§es6æ ¼å¼ã€‚ æ‰“åŒ…çš„æ–‡ä»¶æ ¹æ®ç¯å¢ƒåˆ†ä¸º dev&#x2F;prodï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨ devç‰ˆæœ¬çš„ jsæ–‡ä»¶ï¼Œè€Œéƒ¨ç½²åˆ°å®¢æˆ·ç”Ÿäº§ç¯å¢ƒå°±å¯ä»¥ä½¿ç”¨ prodç‰ˆæœ¬çš„ jsæ–‡ä»¶ã€‚ devç‰ˆæœ¬çš„æ–‡ä»¶æœ‰ä¸€äº›æç¤ºï¼Œä¼šåœ¨å¼€å‘è€…å¼€å‘æ—¶ä¾¿äºè°ƒè¯•ã€‚ 1.2 Fullç‰ˆæœ¬çš„Vueåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ å¹³æ—¶æˆ‘ä»¬å¼€å‘ä¸­åªä½¿ç”¨äº† runtime-only ç‰ˆæœ¬ã€‚ è€Œ Fullç‰ˆæœ¬ä¸­ä¸ä»…æœ‰ runtime-onlyéƒ¨åˆ†ï¼Œè¿˜åŒ…æ‹¬ç¼–è¯‘å™¨éƒ¨åˆ†ã€‚ æ‰€è°“ç¼–è¯‘å™¨ï¼Œå°±æ˜¯åœ¨Vueå†…éƒ¨çš„ç¼–è¯‘å™¨å¯ä»¥å°†æ¨¡æ¿è½¬åŒ–ä¸ºå¯¹åº”çš„renderå‡½æ•°ã€‚ åœ¨Vueå†…éƒ¨æ¸²æŸ“å°±æ˜¯è°ƒç”¨çš„ renderæ–¹æ³•ç”Ÿæˆ vnodeã€‚ å› ä¸ºç¼–è¯‘å™¨ä»£ç ä½“ç§¯æ¯”è¾ƒå¤§ï¼Œè€Œä¸”å¦‚æœåœ¨è¿è¡Œçš„æ—¶å€™è¿›è¡Œæ¨¡æ¿ç¼–è¯‘ï¼Œæå¤§å¯èƒ½ä¼šæ¶ˆè€—æ€§èƒ½ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åœ¨å¼€å‘é¡¹ç›®æ—¶ï¼Œä½¿ç”¨ runtime-onlyç‰ˆæœ¬ã€‚ åœ¨ webpacké¢„ç¼–è¯‘é˜¶æ®µï¼Œå°±å°†.vueæ–‡ä»¶ç¼–è¯‘æˆrenderå‡½æ•°ï¼Œåœ¨è¿è¡Œæ—¶ç›´æ¥è¿è¡Œ renderå‡½æ•°å°±å¯ä»¥è·å–åˆ°å¯¹åº”çš„ vnodeã€‚ é€šè¿‡ runtime-only å’Œ esmå¾ˆå®¹æ˜“æ¨æµ‹å‡ºæ¥æˆ‘ä»¬é¡¹ç›®åœ¨å¼€å‘é˜¶æ®µä¸­ä½¿ç”¨çš„æ˜¯vue.runtime.esm.js 1.3 ä½¿ç”¨ Full è¿˜æ˜¯ç”¨ Runtime-Onlyç‰ˆæœ¬è¿™éœ€è¦ä¾æ®å…·ä½“æƒ…å†µè¿›è¡Œå…·ä½“åˆ†æã€‚ å€˜è‹¥ä½ éœ€è¦ç”¨åˆ° Vue æ‰€æä¾›çš„ html æ¨¡æ¿åŠŸèƒ½ï¼Œé‚£å°±é€‰ç”¨ Full ç‰ˆæœ¬ã€‚ åä¹‹ï¼Œæœ€å¥½é‡‡ç”¨ Runtime-only ç‰ˆæœ¬ï¼ŒåŸå› åœ¨äºå®ƒæ¯” Full ç‰ˆæœ¬çš„æ–‡ä»¶ä½“ç§¯å¤§çº¦å° 30%ã€‚ *.vue å•æ–‡ä»¶ç»„ä»¶ä¼šè¢« vue-loader ç›´æ¥æ„å»ºæˆä¸º JavaScriptï¼Œå¹¶æœªä½¿ç”¨åˆ° Vue çš„ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ Runtime-only ç‰ˆæœ¬ã€‚ äºŒã€ç¥å¥‡çš„â€œ__DEV__â€åœ¨å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œåœ¨æ‰“åŒ…æˆå¼€å‘ç¯å¢ƒçš„åŒ…æ—¶ï¼Œå¾€å¾€ä¼šå­˜åœ¨å¾ˆå¤šæç¤ºä¿¡æ¯ã€‚ è€Œæºç ä¸­åˆ¤æ–­å¼€å‘ç¯å¢ƒé€šå¸¸éƒ½æ˜¯ä½¿ç”¨__DEV__æ¥è¿›è¡Œåˆ¤æ–­ã€‚ 2.1 __DEV__çš„æœ¬è´¨åœ¨Vueæºç ä¸­ï¼Œåˆ°å¤„éƒ½èƒ½çœ‹åˆ°__DEV__å˜é‡çš„èº«å½±ã€‚ ä½†æ˜¯ä½ çœ‹ä¸åˆ°__DEV__è¢« import å¼•å…¥ï¼Œç”šè‡³ä½ éƒ½æ‰¾ä¸åˆ°åœ¨å“ªé‡Œå®šä¹‰äº†è¿™ä¸ªå˜é‡ã€‚ è¿™ä¸ªå˜é‡åœ¨ Vue ä¸­ä»£è¡¨å¼€å‘ç¯å¢ƒã€‚ å½“ä½ åœ¨æºç ä¸­çœ‹è§ if(__DEV__) ä»£è¡¨è¿™ä¸ªifä¸­çš„é€»è¾‘åªæœ‰åœ¨å¼€å‘ç¯å¢ƒæ‰è¿›å…¥æ‰§è¡Œã€‚ vueçš„æ„å»ºå·¥å…·æ˜¯rollupï¼Œåœ¨rollupæ‰“åŒ…çš„æ—¶å€™ä¼šä½¿ç”¨@rollup/plugin-replace æ’ä»¶æ¥æ›¿æ¢æºä»£ç ä¸­çš„__DEV__å˜é‡ï¼Œå¦‚ä¸‹ï¼š 123456789101112......const replace = require(&#x27;@rollup/plugin-replace&#x27;)......// built-in varsconst vars = &#123; ...... __DEV__: `process.env.NODE_ENV !== &#x27;production&#x27;`, ......&#125;......config.plugins.push(replace(vars))...... æ‰€ä»¥__DEV__çš„æœ¬è´¨å°±æ˜¯ proess.env.NODE_ENV!== &#39;production&#39; ã€‚ 2.2 çº¦å®šä¿—æˆçš„â€œprocess.env.NODE_ENV!&#x3D;&#x3D;â€™productionâ€å°† DEV å˜é‡è½¬æ¢ä¸º process.env.NODE_ENV !== &#39;production&#39; è¿™æ ·çš„æ¡ä»¶è¡¨è¾¾å¼åœ¨ç°ä»£å‰ç«¯æ„å»ºå·¥å…·ä¸­æ˜¯ä¸€ç§å¸¸è§çš„çº¦å®šå’Œå®è·µã€‚ åŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š ç¯å¢ƒåŒºåˆ†ï¼šé€šè¿‡ process.env.NODE_ENV å¯ä»¥æ–¹ä¾¿åœ°åœ¨ä»£ç ä¸­åŒºåˆ†å¼€å‘ç¯å¢ƒï¼ˆdevelopmentï¼‰ä¸ç”Ÿäº§ç¯å¢ƒï¼ˆproductionï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­å¯ç”¨ç‰¹å®šçš„è­¦å‘Šã€æ—¥å¿—è®°å½•æˆ–è€…çƒ­åŠ è½½åŠŸèƒ½ï¼›è€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åˆ™ç¦ç”¨è¿™äº›åŠŸèƒ½ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚ Tree-shaking å’Œ UglifyJSï¼šå½“æ‰“åŒ…å·¥å…·å¦‚ Rollup æˆ– webpack é‡åˆ° process.env.NODE_DEV !== &#39;production&#39; åŒ…è£¹çš„ä»£ç å—æ—¶ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šè‡ªåŠ¨å»é™¤ï¼ˆtree-shakeï¼‰å…¶ä¸­ä»…åœ¨å¼€å‘ç¯å¢ƒä¸­éœ€è¦çš„ä»£ç ï¼Œå› ä¸ºè¯¥æ¡ä»¶è¡¨è¾¾å¼æœ€ç»ˆä¼šè¢«ç¼–è¯‘å™¨æˆ–å‹ç¼©å·¥å…·è¯†åˆ«ä¸ºå§‹ç»ˆä¸º falseï¼Œå› æ­¤åŒ…è£¹çš„ä»£ç ä¸ä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆäº§ç‰©ã€‚ æ ‡å‡†åŒ–ï¼šè®¸å¤šæ¡†æ¶å’Œåº“éƒ½é‡‡ç”¨äº†è¿™ç§æ¨¡å¼æ¥å¤„ç†ç¯å¢ƒç›¸å…³çš„é€»è¾‘ï¼Œè¿™æ ·å¼€å‘è€…å¯ä»¥ç»Ÿä¸€éµå¾ªè¿™ä¸ªçº¦å®šï¼Œå‡å°‘é…ç½®å’Œç†è§£æˆæœ¬ã€‚ çµæ´»é…ç½®ï¼šç”±äºæ„å»ºå·¥å…·æ”¯æŒ .env æ–‡ä»¶æˆ–å…¶ä»–æ–¹å¼æ¥è®¾ç½® NODE_ENV çš„å€¼ï¼Œè¿™ä½¿å¾—é¡¹ç›®é…ç½®æ›´åŠ çµæ´»ï¼Œå›¢é˜Ÿæˆå‘˜å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚å¿«é€Ÿåˆ‡æ¢ä¸åŒç¯å¢ƒä¸‹çš„è¡Œä¸ºã€‚ è·¨å¹³å°å…¼å®¹æ€§ï¼šprocess.env.NODE_ENV ä½œä¸ºä¸€ä¸ªæ ‡å‡† Node.js ç¯å¢ƒå˜é‡æ¥å£ï¼Œå·²ç»è¢«å¹¿æ³›æ¥å—ï¼Œå¹¶ä¸”åœ¨å„ç§æ‰“åŒ…å·¥å…·ä¸­éƒ½æœ‰ç›¸åº”çš„æœºåˆ¶å°†å…¶æ˜ å°„åˆ°æœ€ç»ˆæµè§ˆå™¨æ‰§è¡Œçš„ä»£ç ä¸­ï¼Œç¡®ä¿äº†è·¨å¹³å°çš„ä¸€è‡´æ€§ã€‚ ä¸€èˆ¬é¡¹ç›®åœ¨å¼€å‘ç¯å¢ƒä¸­å°†process.env.NODE_ENVè®¾ç½®ä¸ºdevelopmentï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®ä¸ºproductionã€‚æ‰€ä»¥é€šè¿‡process.env.NODE_ENV !== &#39;productionå°±å¯ä»¥åˆ¤æ–­ç°åœ¨æ˜¯å¤„äºä»€ä¹ˆç¯å¢ƒä¸‹ã€‚ 2.3 åœ¨æœ¬åœ°ç¯å¢ƒé…ç½®__DEV__å› ä¸ºæˆ‘ä»¬è¿™é—¨è¯¾ç¨‹æ˜¯å†™ä¸€ä¸ªå®Œæ•´ç‰ˆçš„vue2ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨__DEV__è¿™ä¸ªå˜é‡ä»£è¡¨å¼€å‘ç¯å¢ƒã€‚ æˆ‘ä»¬æœ¬åœ°çš„é¡¹ç›®æ˜¯ä½¿ç”¨ vue-cli æ­å»ºçš„ã€‚ å¯ä»¥åœ¨ webpacké…ç½®æ–‡ä»¶ vue.config.js æ–‡ä»¶æ–°å¢ä¸€ä¸ªé…ç½®è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚ 1234567891011121314// vue.config.jsconst &#123; defineConfig &#125; = require(&#x27;@vue/cli-service&#x27;);const webpack = require(&#x27;webpack&#x27;);module.exports = defineConfig(&#123; transpileDependencies: true, lintOnSave:false, configureWebpack: &#123; plugins: [ new webpack.DefinePlugin(&#123; __DEV__: process.env.NODE_ENV === &#x27;development&#x27;, &#125;), ], &#125;,&#125;) DefinePlugin æ’ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯åœ¨ç¼–è¯‘æ—¶å°†é¢„å®šä¹‰çš„å€¼æ›¿æ¢åˆ°æºä»£ç ä¸­çš„ç‰¹å®šå˜é‡ã€‚ æˆ‘ä»¬æ‰§è¡Œyarn startå¯åŠ¨è¿™ä¸ªé¡¹ç›®æ‰“å°ä¸€ä¸‹__DEV__ä¸º trueå³ä¸ºæˆåŠŸã€‚ 1console.log(__DEV__); // true"},{"title":"ğŸ”¥Vue2ç›®å½•ç»“æ„çª¥æ¢","path":"//posts/vue2-catalog.html","content":"&emsp;&emsp;æœ¬ä¸“æ æ—¨åœ¨é€šè¿‡ç”¨ä¸°å¯Œçš„å›¾æ–‡è¯¦è§£æ¥å¸®åŠ©ä½ å…¨é¢æ·±å…¥çš„äº†è§£ Vue2 æºç ã€‚è¿™æ˜¯æœ¬ä¸“æ çš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚ &emsp;&emsp;å› ä¸º Vue æ¡†æ¶æ˜¯åœ¨åå¤šå¹´å‰äº§ç”Ÿçš„ä¸€ä¸ªå¼€æºå‰ç«¯æ¡†æ¶ï¼Œç»è¿‡ä¸€äº›è¿­ä»£ä¿®å¤ï¼Œç›®å‰å·²ç»è¶‹äºç¨³å®šã€‚ &emsp;&emsp;Vue2æ¡†æ¶åœ¨å¯ç»´æŠ¤æ€§ã€æ€§èƒ½ã€TypeScriptæ”¯æŒç­‰æ–¹é¢æœ‰ä¸€äº›ç—›ç‚¹ï¼Œæ‰€ä»¥å°¤é›¨æºªæ¨å‡ºäº† Vue3ç‰ˆæœ¬ã€‚ &emsp;&emsp;ä¸è¿‡ç›®å‰å¤§éƒ¨åˆ†å…¬å¸å› ä¸ºæˆæœ¬ç­‰æ–¹é¢çš„åŸå› ï¼Œè¿˜æ˜¯ä½¿ç”¨åœ¨ Vue2 ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¸ªä¸“æ å°±æ¥æ¢è®¨ä¸€ä¸‹ Vue2 çš„æºç éƒ¨åˆ†ã€‚ ä¸€ã€éæ ¸å¿ƒVueæºç ç›®å½•å¤§è‡´ç»“æ„æˆ‘ä»¬çœ‹çš„Vueæºç ç‰ˆæœ¬2.7.16æ˜¯Vue2çš„æœ€æ–°ç‰ˆæœ¬ æˆ‘ä»¬æ‰“å¼€Vue2çš„githubæºç åœ°å€ã€‚ å¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰å¾ˆå¤šä¸ªç›®å½•æ–‡ä»¶ï¼Œä½†æ˜¯å…¶å® Vue2 æºç æ ¸å¿ƒçš„éƒ½æ˜¯åœ¨ srcæ–‡ä»¶å¤¹ä¸­çš„ã€‚ æˆ‘ä»¬è¿™ç« å¤§æ¦‚ä»‹ç»ä¸€ä¸‹é™¤äº† src ä¸‹é¢çš„ä¸€äº›ç›®å½•ï¼Œäº†è§£ä¸€ä¸‹å¤§ä½“çš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚ 1.1 .githubè¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ä¸ gitHub ç›¸å…³çš„é…ç½®æ–‡ä»¶æˆ–è€…è„šæœ¬ã€‚ 1.2 benchmarksè¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾æ€§èƒ½åŸºå‡†æµ‹è¯•çš„ç›¸å…³æ–‡ä»¶å’Œè„šæœ¬ã€‚ æ€§èƒ½åŸºå‡†æµ‹è¯•æ˜¯ä¸€ç§ç”¨æ¥è¯„ä¼°è½¯ä»¶æ€§èƒ½çš„æ–¹æ³•ï¼Œå®ƒé€šè¿‡æ¨¡æ‹ŸçœŸå®ä¸–ç•Œä¸­çš„ä½¿ç”¨åœºæ™¯æ¥æµ‹é‡è½¯ä»¶åœ¨ä¸åŒæ¡ä»¶ä¸‹çš„è¡¨ç°ã€‚å¯ä»¥ç¡®ä¿æ–°åŠŸèƒ½ä¸ä¼šé™ä½æ¡†æ¶çš„æ•´ä½“æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨æ¥ä¼˜åŒ–ç°æœ‰ä»£ç ï¼Œä½¿å…¶æ›´åŠ é«˜æ•ˆã€‚ 1.3. compiler-sfcè¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹é€»è¾‘å°±å¯ä»¥ååŠ© webpackè¿›è¡Œè§£æå¤„ç†å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ã€‚ é€šå¸¸æˆ‘ä»¬å¼€å‘æ—¶ä¼šå€ŸåŠ©webpackå°†vueæ–‡ä»¶è½¬åŒ–ä¸ºä¸€ä¸ªJSå¯¹è±¡ã€‚ å¯ä»¥æŸ¥çœ‹ä»–çš„ index.jsæ–‡ä»¶ å‘ç°å®é™…ä¸Šå°±æ˜¯å¯¼å‡ºäº†@vue/compiler-sfcè¿™ä¸ªåŒ…ã€‚ 1module.exports = require(&#x27;@vue/compiler-sfc&#x27;) 1.4. distè¯¥æ–‡ä»¶å¤¹ä¸ºæ‰“åŒ…æ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹ã€‚ 1.5. examplesè¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ç¤ºä¾‹åº”ç”¨ç¨‹åºæˆ–ä»£ç ç‰‡æ®µï¼Œç›®çš„æ˜¯å±•ç¤º Vue.js çš„åŸºæœ¬ç”¨æ³•å’ŒåŠŸèƒ½ã€‚ 1.6 packagesè¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºç»„ç»‡ Vue.js çš„å„ä¸ªå­åŒ…æˆ–æ¨¡å—ã€‚ éšç€ Vue.js é¡¹ç›®çš„å¤æ‚åº¦å¢åŠ ï¼Œå°†ä¸åŒçš„åŠŸèƒ½æ¨¡å—æ‹†åˆ†æˆç‹¬ç«‹çš„å­åŒ…å·²ç»æˆä¸ºäº†ä¸€ç§å¸¸è§çš„åšæ³•ã€‚ è¿™æ ·ä¸ä»…æœ‰åˆ©äºæ¨¡å—åŒ–å¼€å‘ï¼Œè¿˜èƒ½æ–¹ä¾¿ä¾èµ–ç®¡ç†å’Œå‘å¸ƒã€‚ è¯¥ç›®å½•ä¸‹æœ‰ä¸‰ä¸ªç›®å½•ã€‚ 1.6.1 compiler-sfcè¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ä¸»è¦ç”¨äºå¤„ç†å•æ–‡ä»¶ç»„ä»¶ã€‚ 1.6.2 server-rendererè¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹å’ŒæœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³çš„å†…å®¹ã€‚ 1.6.3 template-compilerè¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹å­˜æ”¾æ¨¡æ¿ç¼–è¯‘ç›¸å…³çš„é€»è¾‘ã€‚ 1.7 scriptsè¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºå­˜æ”¾å„ç§è‡ªåŠ¨åŒ–è„šæœ¬ã€‚ è¿™äº›è„šæœ¬é€šå¸¸ç”¨äºè¾…åŠ©é¡¹ç›®çš„æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒå’Œå…¶ä»–å¼€å‘ä»»åŠ¡ã€‚ 1.8 srcè¯¥æ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ vueæ¡†æ¶æ ¸å¿ƒæºç çš„åœ°æ–¹ã€‚ 1.9 testè¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºå­˜æ”¾å„ç§ç±»å‹çš„æµ‹è¯•æ–‡ä»¶ï¼Œè¿™äº›æµ‹è¯•æ–‡ä»¶ç”¨äºéªŒè¯ Vue.js æ¡†æ¶çš„åŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚ 1.10 typesè¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºå­˜æ”¾ TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚ è¿™äº›ç±»å‹å®šä¹‰æ–‡ä»¶ä¸º Vue.js æä¾›äº†ç±»å‹æ”¯æŒï¼Œä½¿å¾—åœ¨ä½¿ç”¨ Vue.js æ—¶å¯ä»¥äº«å—é™æ€ç±»å‹æ£€æŸ¥çš„å¥½å¤„ï¼Œä»è€Œæé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚ 1.11 .editorconfigè¯¥æ–‡ä»¶ç”¨äºæŒ‡å®šç¼–è¾‘å™¨åº”è¯¥éµå¾ªçš„ä¸€ç³»åˆ—ç¼–ç å’Œæ ¼å¼åŒ–è§„åˆ™ã€‚ 1.12 .git-blame-ignore-revsè¯¥æ–‡ä»¶ç”¨äºå‘Šè¯‰ Git åœ¨æ‰§è¡Œ git blame å‘½ä»¤æ—¶å¿½ç•¥æŸäº›ç‰¹å®šçš„æäº¤è®°å½•ã€‚ 1.13 .gitignoreè¯¥æ–‡ä»¶ç”¨äºæŒ‡å®š Git åº”è¯¥å¿½ç•¥å“ªäº›æ–‡ä»¶æˆ–ç›®å½•ï¼Œå³ä¸å°†è¿™äº›æ–‡ä»¶æˆ–ç›®å½•çº³å…¥ç‰ˆæœ¬æ§åˆ¶ã€‚ 1.14 .prettierrcè¯¥æ–‡ä»¶ç”¨äºé…ç½® Prettierã€‚ Prettieræ˜¯ä¸€ä¸ªæµè¡Œçš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ä¿æŒä»£ç é£æ ¼çš„ä¸€è‡´æ€§ã€‚Prettier å¯ä»¥è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œä½¿å…¶ç¬¦åˆé¢„è®¾çš„ç¼–ç è§„èŒƒï¼Œä»è€Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚ 1.15 BACKERS.mdè¯¥æ–‡ä»¶ä¸»è¦ç”¨äºè®°å½•å’Œæ”¯æŒ Vue.js é¡¹ç›®çš„èµåŠ©è€…æˆ–è´¡çŒ®è€…ã€‚ è¿™ä»½æ–‡ä»¶é€šå¸¸åˆ—å‡ºäº†é‚£äº›é€šè¿‡èµ„é‡‘æˆ–å…¶ä»–å½¢å¼æ”¯æŒ Vue.js å‘å±•çš„ä¸ªäººæˆ–ç»„ç»‡ã€‚ 1.16 CHANGELOG.mdè¯¥æ–‡ä»¶ä¸»è¦ç”¨äºè®°å½•é¡¹ç›®çš„ç‰ˆæœ¬å˜æ›´å†å²ï¼ŒåŒ…æ‹¬æ¯ä¸ªç‰ˆæœ¬çš„æ–°å¢åŠŸèƒ½ã€æ”¹è¿›ã€ä¿®å¤çš„é”™è¯¯ä»¥åŠå…¶ä»–é‡è¦çš„å˜æ›´ä¿¡æ¯ã€‚ 1.17 LICENSEè¯¥æ–‡ä»¶ç”¨æ¥å®šä¹‰å’Œå£°æ˜é¡¹ç›®ä½¿ç”¨çš„è®¸å¯åè®®çš„æ–‡ä»¶ 1.18 README.mdè¯¥æ–‡ä»¶ä¸ºé¡¹ç›®çš„å…¥å£æ–‡æ¡£æ–‡ä»¶ã€‚ æ–‡ä»¶æä¾›äº†å…³äºé¡¹ç›®çš„æ¦‚è¿°ã€å®‰è£…æ­¥éª¤ã€ä½¿ç”¨æ–¹æ³•ã€è´¡çŒ®æŒ‡å—ç­‰å…³é”®ä¿¡æ¯ã€‚ 1.19 api-extractor.jsonè¯¥æ–‡ä»¶ç”¨äºé…ç½® API Extractor å·¥å…·ï¼ˆè¿™æ˜¯ä¸€ç§ç”¨äºç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰æ–‡æ¡£å’Œ API æŠ¥å‘Šçš„å·¥å…·ï¼‰ API Extractor é€šå¸¸ç”¨äºå¤§å‹ TypeScript é¡¹ç›®ä¸­ï¼Œå¸®åŠ©å¼€å‘è€…ç”Ÿæˆè¯¦ç»†çš„ API æ–‡æ¡£ï¼Œå¹¶ç¡®ä¿ç±»å‹å®šä¹‰çš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚ 1.20 api-extractor.tsconfig.jsonè¯¥æ–‡ä»¶ç”¨äºé…ç½® TypeScript ç¼–è¯‘é€‰é¡¹ï¼Œä»¥é…åˆ API Extractor å·¥å…·ç”Ÿæˆ API æ–‡æ¡£å’Œç±»å‹å®šä¹‰æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶é€šå¸¸åŒ…å«äº†ä¸€äº›ç‰¹å®šçš„ TypeScript é…ç½®ï¼Œç¡®ä¿ API Extractor èƒ½å¤Ÿæ­£ç¡®åœ°è§£æå’Œå¤„ç†æºä»£ç ã€‚ 1.21 package.jsonè¯¥æ–‡ä»¶æ˜¯é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„å…ƒæ•°æ®ä»¥åŠé¡¹ç›®ä¾èµ–å…³ç³»å’Œæ„å»ºè„šæœ¬ã€‚ 1.22 pnpm-lock.yamlè¯¥æ–‡ä»¶æ˜¯ç”± pnpm åŒ…ç®¡ç†å™¨ç”Ÿæˆçš„é”å®šæ–‡ä»¶ã€‚ ç”¨äºè®°å½•é¡¹ç›®ä¸­æ‰€æœ‰ä¾èµ–é¡¹çš„å…·ä½“ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•è¢«å®‰è£…çš„ã€‚ pnpm æ˜¯ä¸€ç§æ›¿ä»£ npm å’Œ yarn çš„é«˜æ€§èƒ½åŒ…ç®¡ç†å™¨ï¼Œå®ƒå…·æœ‰æ›´å¿«çš„é€Ÿåº¦å’Œæ›´å°‘çš„ç£ç›˜ç©ºé—´å ç”¨ã€‚ 1.23 pnpm-workspace.yamlè¯¥æ–‡ä»¶ç”¨äºé…ç½® pnpm å·¥ä½œåŒºï¼ˆworkspaceï¼‰ã€‚ pnpm æ”¯æŒå¤šé¡¹ç›®çš„å·¥ä½œåŒºæ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼å…è®¸å¤šä¸ªç›¸å…³é¡¹ç›®å…±äº«ä¾èµ–ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†è¿™äº›é¡¹ç›®çš„ä¾èµ–å…³ç³»å’Œæ„å»ºæµç¨‹ã€‚ 1.24 tsconfig.jsonè¯¥æ–‡ä»¶æ˜¯ TypeScript ç¼–è¯‘é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ TypeScript ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æºä»£ç æ—¶åº”éµå¾ªçš„é€‰é¡¹å’Œè§„åˆ™ã€‚ 1.25 vitest.config.tsè¯¥æ–‡ä»¶ç”¨äºé…ç½® Vitest çš„æµ‹è¯•æ¡†æ¶é…ç½®æ–‡ä»¶ã€‚ Vitest æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ JavaScript å’Œ TypeScript æµ‹è¯•æ¡†æ¶ï¼Œå®ƒæä¾›äº†å¿«é€Ÿçš„æµ‹è¯•è¿è¡Œé€Ÿåº¦å’Œä¸°å¯Œçš„åŠŸèƒ½é›†ï¼Œé€‚ç”¨äºå‰ç«¯å’Œåç«¯å¼€å‘ã€‚ äºŒã€srcç›®å½•ä¸‹æœ‰ä»€ä¹ˆï¼Ÿä¸Šä¸€ç« èŠ‚æˆ‘ä»¬ç®€å•ä»‹ç»äº†ä¸€ä¸‹é srcæ–‡ä»¶å¤¹ä¸‹é¢çš„ä¸€äº›æ–‡ä»¶å†…å®¹ã€‚ è¿™äº›éƒ½æ˜¯åœ¨ä¸€ä¸ªå·¥ç¨‹åŒ–çš„æ¡†æ¶é¡¹ç›®ä¸­å¿…ä¸å¯å°‘çš„éƒ¨åˆ†ã€‚ é‚£ä¹ˆæœ¬èŠ‚çš„å†…å®¹å°±æ˜¯çœ‹ä¸‹ src æ–‡ä»¶å¤¹ä¸‹åŒ…å«å“ªäº›å†…å®¹ã€‚ ä¸‹é¢è¿™ä¸ªç›®å½•ç»“æ„å»é™¤äº† tsç›¸å…³çš„å£°æ˜æ–‡ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147srcâ”œâ”€shared| â”œâ”€constants.ts| â””util.tsâ”œâ”€platforms| â”œâ”€web| | â”œâ”€entry-compiler.ts| | â”œâ”€entry-runtime-esm.ts| | â”œâ”€entry-runtime-with-compiler-esm.ts| | â”œâ”€entry-runtime-with-compiler.ts| | â”œâ”€entry-runtime.ts| | â”œâ”€runtime-with-compiler.ts| | â”œâ”€util| | | â”œâ”€attrs.ts| | | â”œâ”€class.ts| | | â”œâ”€compat.ts| | | â”œâ”€element.ts| | | â”œâ”€index.ts| | | â””style.ts| | â”œâ”€runtime| | | â”œâ”€class-util.ts| | | â”œâ”€index.ts| | | â”œâ”€node-ops.ts| | | â”œâ”€patch.ts| | | â”œâ”€transition-util.ts| | | â”œâ”€modules| | | | â”œâ”€attrs.ts| | | | â”œâ”€class.ts| | | | â”œâ”€dom-props.ts| | | | â”œâ”€events.ts| | | | â”œâ”€index.ts| | | | â”œâ”€style.ts| | | | â””transition.ts| | | â”œâ”€directives| | | | â”œâ”€index.ts| | | | â”œâ”€model.ts| | | | â””show.ts| | | â”œâ”€components| | | | â”œâ”€index.ts| | | | â”œâ”€transition-group.ts| | | | â””transition.ts| | â”œâ”€compiler| | | â”œâ”€index.ts| | | â”œâ”€options.ts| | | â”œâ”€util.ts| | | â”œâ”€modules| | | | â”œâ”€class.ts| | | | â”œâ”€index.ts| | | | â”œâ”€model.ts| | | | â””style.ts| | | â”œâ”€directives| | | | â”œâ”€html.ts| | | | â”œâ”€index.ts| | | | â”œâ”€model.ts| | | | â””text.tsâ”œâ”€core| â”œâ”€config.ts| â”œâ”€index.ts| â”œâ”€vdom| | â”œâ”€create-component.ts| | â”œâ”€create-element.ts| | â”œâ”€create-functional-component.ts| | â”œâ”€patch.ts| | â”œâ”€vnode.ts| | â”œâ”€modules| | | â”œâ”€directives.ts| | | â”œâ”€index.ts| | | â””template-ref.ts| | â”œâ”€helpers| | | â”œâ”€extract-props.ts| | | â”œâ”€get-first-component-child.ts| | | â”œâ”€index.ts| | | â”œâ”€is-async-placeholder.ts| | | â”œâ”€merge-hook.ts| | | â”œâ”€normalize-children.ts| | | â”œâ”€normalize-scoped-slots.ts| | | â”œâ”€resolve-async-component.ts| | | â””update-listeners.ts| â”œâ”€util| | â”œâ”€debug.ts| | â”œâ”€env.ts| | â”œâ”€error.ts| | â”œâ”€index.ts| | â”œâ”€lang.ts| | â”œâ”€next-tick.ts| | â”œâ”€options.ts| | â”œâ”€perf.ts| | â””props.ts| â”œâ”€observer| | â”œâ”€array.ts| | â”œâ”€dep.ts| | â”œâ”€index.ts| | â”œâ”€scheduler.ts| | â”œâ”€traverse.ts| | â””watcher.ts| â”œâ”€instance| | â”œâ”€events.ts| | â”œâ”€index.ts| | â”œâ”€init.ts| | â”œâ”€inject.ts| | â”œâ”€lifecycle.ts| | â”œâ”€proxy.ts| | â”œâ”€render.ts| | â”œâ”€state.ts| | â”œâ”€render-helpers| | | â”œâ”€bind-dynamic-keys.ts| | | â”œâ”€bind-object-listeners.ts| | | â”œâ”€bind-object-props.ts| | | â”œâ”€check-keycodes.ts| | | â”œâ”€index.ts| | | â”œâ”€render-list.ts| | | â”œâ”€render-slot.ts| | | â”œâ”€render-static.ts| | | â”œâ”€resolve-filter.ts| | | â”œâ”€resolve-scoped-slots.ts| | | â””resolve-slots.ts| â”œâ”€global-api| | â”œâ”€assets.ts| | â”œâ”€extend.ts| | â”œâ”€index.ts| | â”œâ”€mixin.ts| | â””use.ts| â”œâ”€components| | â”œâ”€index.ts| | â””keep-alive.tsâ”œâ”€compiler| â”œâ”€codeframe.ts| â”œâ”€create-compiler.ts| â”œâ”€error-detector.ts| â”œâ”€helpers.ts| â”œâ”€index.ts| â”œâ”€optimizer.ts| â”œâ”€to-function.ts| â”œâ”€parser| | â”œâ”€entity-decoder.ts| | â”œâ”€filter-parser.ts| | â”œâ”€html-parser.ts| | â”œâ”€index.ts| | â””text-parser.ts| â”œâ”€directives| | â”œâ”€bind.ts| | â”œâ”€index.ts| | â”œâ”€model.ts| | â””on.ts| â”œâ”€codegen| | â”œâ”€events.ts| | â””index.ts ä¸‰ã€sharedæ–‡ä»¶å¤¹ 1234srcâ”œâ”€shared| â”œâ”€constants.ts| â””util.ts è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«äº†ä¸€äº›åœ¨ä¸åŒç¯å¢ƒä¸‹éƒ½éœ€è¦å…±äº«çš„å·¥å…·å‡½æ•°æˆ–è€…å¸¸é‡ã€‚ è¿™ä¸ªå·¥å…·å‡½æ•°ä¸å¹³å°æ— å…³ã€‚ æ—¢å¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡ç«¯ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¾èµ–äºä»»ä½•ç‰¹å®šçš„ç¯å¢ƒç‰¹æ€§ï¼ˆä¾‹å¦‚ DOMï¼‰ã€‚ constants.tsæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€äº›åœ¨æ•´ä¸ªæ¡†æ¶å†…é¢‘ç¹ä½¿ç”¨çš„å¸¸é‡ï¼Œæ¯”å¦‚ç‰¹æ®Šçš„å­—ç¬¦ä¸²æ ‡è¯†ç¬¦ã€é…ç½®é”®åç­‰ã€‚ util.tsæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€äº›åŸºç¡€çš„å·¥å…·å‡½æ•°ï¼Œæ¯”å¦‚ isStringã€isObjectå’Œå…¶ä»–ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå¦‚æ·±æ‹·è´ã€è­¦å‘Šè¾“å‡ºç­‰ã€‚ è¿™äº›æ–‡ä»¶çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ã€‚ é€šè¿‡å°†è¿™äº›åŠŸèƒ½æŠ½è±¡å‡ºæ¥ï¼ŒVue.js èƒ½å¤Ÿä¿æŒæ ¸å¿ƒé€»è¾‘çš„ç®€æ´ï¼Œå¹¶ä¸”ç¡®ä¿ä¸åŒéƒ¨åˆ†ä¹‹é—´çš„å…¼å®¹æ€§ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯å‡å°‘äº†é‡å¤ä»£ç ï¼Œä½¿å¾—ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚ å››ã€platformsæ–‡ä»¶å¤¹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152srcâ”œâ”€platforms| â”œâ”€web| | â”œâ”€entry-compiler.ts| | â”œâ”€entry-runtime-esm.ts| | â”œâ”€entry-runtime-with-compiler-esm.ts| | â”œâ”€entry-runtime-with-compiler.ts| | â”œâ”€entry-runtime.ts| | â”œâ”€runtime-with-compiler.ts| | â”œâ”€util| | | â”œâ”€attrs.ts| | | â”œâ”€class.ts| | | â”œâ”€compat.ts| | | â”œâ”€element.ts| | | â”œâ”€index.ts| | | â””style.ts| | â”œâ”€runtime| | | â”œâ”€class-util.ts| | | â”œâ”€index.ts| | | â”œâ”€node-ops.ts| | | â”œâ”€patch.ts| | | â”œâ”€transition-util.ts| | | â”œâ”€modules| | | | â”œâ”€attrs.ts| | | | â”œâ”€class.ts| | | | â”œâ”€dom-props.ts| | | | â”œâ”€events.ts| | | | â”œâ”€index.ts| | | | â”œâ”€style.ts| | | | â””transition.ts| | | â”œâ”€directives| | | | â”œâ”€index.ts| | | | â”œâ”€model.ts| | | | â””show.ts| | | â”œâ”€components| | | | â”œâ”€index.ts| | | | â”œâ”€transition-group.ts| | | | â””transition.ts| | â”œâ”€compiler| | | â”œâ”€index.ts| | | â”œâ”€options.ts| | | â”œâ”€util.ts| | | â”œâ”€modules| | | | â”œâ”€class.ts| | | | â”œâ”€index.ts| | | | â”œâ”€model.ts| | | | â””style.ts| | | â”œâ”€directives| | | | â”œâ”€html.ts| | | | â”œâ”€index.ts| | | | â”œâ”€model.ts| | | | â””text.ts 4.1 ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªplatformsç›®å½•å‘¢ï¼Ÿplatforms ç¿»è¯‘æˆä¸­æ–‡è¡¨ç¤ºâ€œå¹³å°â€œã€‚ vueä½œä¸ºä¸€ä¸ªè·¨å¹³å°çš„æ¡†æ¶ï¼Œä¸ä»…æ”¯æŒä¼ ç»Ÿçš„webæµè§ˆå™¨ç¯å¢ƒï¼Œè¿˜æ”¯æŒå…¶ä»–å¹³å°ï¼Œå¦‚æœåŠ¡å™¨æ¸²æŸ“ï¼ˆSSRï¼‰ï¼Œç”šè‡³æ˜¯éæµè§ˆå™¨ç¯å¢ƒã€‚ å› æ­¤ï¼Œå°† Web å¹³å°ç›¸å…³çš„ä»£ç å•ç‹¬æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œæœ‰åŠ©äºä¿æŒä»£ç çš„æ¸…æ™°åº¦å’Œå¯ç»´æŠ¤æ€§ã€‚ Webå¹³å°æœ‰è®¸å¤šç‰¹å®šçš„åŠŸï¼Œæ¯”å¦‚ DOMæ“ä½œã€CSSåŠ¨ç”»ã€äº‹ä»¶å¤„ç†ç­‰ã€‚è¿™äº›åŠŸèƒ½åœ¨ Vueçš„ Webç‰ˆæœ¬ä¸­æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯åœ¨å…¶ä»–å¹³å°ä¸Šåˆ™ä¸ä¸€å®šé€‚ç”¨ã€‚å°†è¿™äº›ä»£ç ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå¯ä»¥ç¡®ä¿å®ƒä»¬åªåœ¨ Webå¹³å°ä¸Šç”Ÿæ•ˆï¼Œè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–å¹³å°çš„æ„å»ºã€‚ å½“ç„¶ç›®å‰ä»…ä»…åªæœ‰ä¸€ä¸ªwebå¹³å°ï¼Œæ‰€ä»¥å¹³å°ä¸‹åªæœ‰ä¸€ä¸ª webç›®å½•ã€‚ 4.2 å‡ ä¸ªå…¥å£æ–‡ä»¶entry-*æ–‡ä»¶ä¸»è¦ç”¨äºå®šä¹‰ä¸åŒæ„å»ºé…ç½®ä¸‹çš„å…¥å£ç‚¹ã€‚ webç›®å½•ä¸‹æœ‰entry-compiler.tsã€entry-runtime-esm.tsã€entry-runtime-with-compiler-esm.tsã€entry-runtime-with-compilerã€entry-runtime.tsäº”ä¸ªå…¥å£æ–‡ä»¶ã€‚ åœ¨vueæºç scripts/config.jsä¸­æœ‰æ‰“åŒ…ç›¸å…³çš„é…ç½®ï¼Œå…¶ä¸­å°±åˆ©ç”¨äº†è¿™å‡ ä¸ªå…¥å£æ–‡ä»¶ã€‚ 4.2.1 entry-compiler.tsè¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªæä¾›ç¼–è¯‘ html æ¨¡æ¿ç›¸å…³æ¥å£çš„æ¨¡å—ï¼Œé€šå¸¸ç”¨äºä¸º Vue ç¼–å†™çš„æ„å»ºæ’ä»¶ï¼Œæ¯”å¦‚ vue-loaderã€‚ 1234567891011// scripts/config.jslet builds = &#123; compiler: &#123; entry: resolve(&#x27;web/entry-compiler.ts&#x27;), dest: resolve(&#x27;packages/template-compiler/build.js&#x27;), format: &#x27;cjs&#x27;, external: Object.keys( require(&#x27;../packages/template-compiler/package.json&#x27;).dependencies ) &#125;,&#125; 4.2.2 entry-runtime.ts &amp; entry-runtime-esm.tsè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½ç”¨äºæ„å»ºä»…åŒ…å«è¿è¡Œæ—¶çš„æ–‡ä»¶ï¼Œä¸å…·å¤‡ç¼–è¯‘ html æ¨¡æ¿åŠŸèƒ½ã€‚åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯ esmæ ¼å¼ï¼Œä¸€ä¸ªä¸æ˜¯ã€‚ 12345678910111213141516// scripts/config.jslet builds = &#123; &#x27;runtime-esm&#x27;: &#123; entry: resolve(&#x27;web/entry-runtime-esm.ts&#x27;), dest: resolve(&#x27;dist/vue.runtime.esm.js&#x27;), format: &#x27;es&#x27;, banner &#125;, &#x27;runtime-prod&#x27;: &#123; entry: resolve(&#x27;web/entry-runtime.ts&#x27;), dest: resolve(&#x27;dist/vue.runtime.min.js&#x27;), format: &#x27;umd&#x27;, env: &#x27;production&#x27;, banner &#125;,&#125; 4.2.3 entry-runtime-with-compiler.ts &amp; entry-runtime-with-compiler-esm.tsè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½ç”¨äºæ„å»ºåŒæ—¶åŒ…å«ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶çš„å…¨åŠŸèƒ½æ–‡ä»¶ã€‚ åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯ esmæ ¼å¼ï¼Œä¸€ä¸ªä¸æ˜¯ã€‚ ä¸‹é¢çš„full-cjs-prodå¯ä»¥çœ‹å‡ºæ¥è¿™ä¸ªå…¨ç‰ˆæœ¬ï¼Œæœ‰ vueçš„å…¨éƒ¨åŠŸèƒ½ã€‚ 1234567891011121314151617181920// scripts/config.jslet builds = &#123; &#x27;full-cjs-prod&#x27;: &#123; entry: resolve(&#x27;web/entry-runtime-with-compiler.ts&#x27;), dest: resolve(&#x27;dist/vue.common.prod.js&#x27;), format: &#x27;cjs&#x27;, env: &#x27;production&#x27;, alias: &#123; he: &#x27;./entity-decoder&#x27; &#125;, banner &#125;, &#x27;full-esm-browser-prod&#x27;: &#123; entry: resolve(&#x27;web/entry-runtime-with-compiler-esm.ts&#x27;), dest: resolve(&#x27;dist/vue.esm.browser.min.js&#x27;), format: &#x27;es&#x27;, transpile: false, env: &#x27;production&#x27;, alias: &#123; he: &#x27;./entity-decoder&#x27; &#125;, banner &#125;,&#125; 4.3 runtime-with-compiler.tsä¹‹å‰æˆ‘ä»¬äº†è§£åˆ° Vueåˆ†ä¸º runtime å’Œ compilerä¸¤ä¸ªéƒ¨åˆ†ã€‚ è€Œ runtime-with-compiler.tsæ–‡ä»¶å°±æ˜¯æ—¢æœ‰ runtimeéƒ¨åˆ† ä¹Ÿæœ‰ compileréƒ¨åˆ†ã€‚ ä¸Šé¢çš„entry-runtime-with-compiler.tså’Œentry-runtime-with-compiler-esm.tså°±æ˜¯åŸºäºè¿™ä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…çš„ã€‚åªæ˜¯åˆ†åˆ«æ‰©å±•äº†vueçš„ä¸€äº›åŠŸèƒ½ã€‚ 4.4 utilç›®å½•è¯¥ç›®å½•åŒ…å«äº† Vueåœ¨ Webå¹³å°ä¸Šå¸¸ç”¨çš„å·¥å…·å‡½æ•°å’Œä½¿ç”¨å·¥å…·ã€‚ è¿™äº›å·¥å…·ä¸»è¦ç”¨äºå¤„ç†ä¸ Webå¹³å°ç›¸å…³çš„å„ç§ç»†èŠ‚ã€‚ 4.5 runtimeç›®å½•4.5.1 componentsç›®å½•è¯¥ç›®å½•ä¸‹å­˜æ”¾ç€ vue webå¹³å°ä¸­ä½¿ç”¨çš„ç»„ä»¶å¦‚ transitionã€transition-groupç»„ä»¶ç­‰ï¼Œå€ŸåŠ©è¿™äº›ç»„ä»¶å¯ä»¥å®ç°è¿‡æ¸¡åŠ¨ç”»ã€‚ 4.5.2 directivesç›®å½•è¯¥ç›®å½•ä¸‹çš„ä¸»è¦å­˜æ”¾æ˜¯ vueçš„å†…éƒ¨æŒ‡ä»¤æ–‡ä»¶ï¼Œå¦‚v-modelã€v-showæŒ‡ä»¤ã€‚ 4.5.3 modulesç›®å½•è¯¥ç›®å½•ä¸‹çš„ä¸»è¦å­˜æ”¾çš„æ˜¯vueåœ¨ webå¹³å°ä¸Šå¸¸è§çš„ DOMæ“ä½œå’Œç‰¹æ€§å¤„ç†ã€‚ 4.5.3.1 attrs.tsè¿™ä¸ªæ–‡ä»¶å®ç°äº†å¤„ç†å…ƒç´ å±æ€§çš„æ¨¡å—ï¼Œå®ƒè´Ÿè´£æ›´æ–°å’Œç®¡ç†å…ƒç´ çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œå½“æ•°æ®æ¨¡å‹ä¸­çš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦æ›´æ–° DOM ä¸­ç›¸åº”çš„å±æ€§å€¼ã€‚ 4.5.3.2 class.tsè¿™ä¸ªæ–‡ä»¶å®ç°äº†å¤„ç†å…ƒç´ ç±»çš„æ¨¡å—ï¼Œå®ƒè´Ÿè´£æ›´æ–°å’Œç®¡ç†å…ƒç´ çš„ç±»åã€‚ä¾‹å¦‚ï¼Œæ ¹æ®æ•°æ®æ¨¡å‹ä¸­çš„æ¡ä»¶åŠ¨æ€æ·»åŠ æˆ–ç§»é™¤ç±»åã€‚ 4.5.3.3 dom-props.tsè¿™ä¸ªæ–‡ä»¶å®ç°äº†å¤„ç† DOM å±æ€§çš„æ¨¡å—ï¼Œå®ƒè´Ÿè´£åŒæ­¥å’Œæ›´æ–° DOM å±æ€§ï¼Œå¦‚ value, checked ç­‰ã€‚è¿™åœ¨å¤„ç†è¡¨å•æ§ä»¶æ—¶å°¤ä¸ºé‡è¦ã€‚ 4.5.3.4 events.tsè¿™ä¸ªæ–‡ä»¶å®ç°äº†å¤„ç†äº‹ä»¶ç»‘å®šçš„æ¨¡å—ï¼Œå®ƒè´Ÿè´£åœ¨ DOM å…ƒç´ ä¸Šæ·»åŠ ã€æ›´æ–°å’Œç§»é™¤äº‹ä»¶ç›‘å¬å™¨ã€‚è¿™ä½¿å¾— Vue.js å¯ä»¥å“åº”ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºï¼Œå¹¶è§¦å‘ç›¸åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚ 4.5.3.5 style.tsè¿™ä¸ªæ–‡ä»¶å®ç°äº†å¤„ç†å†…è”æ ·å¼çš„æ¨¡å—ï¼Œå®ƒè´Ÿè´£æ›´æ–°å’Œç®¡ç†å…ƒç´ çš„å†…è”æ ·å¼ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®æ•°æ®æ¨¡å‹ä¸­çš„æ¡ä»¶åŠ¨æ€è®¾ç½®æˆ–ç§»é™¤å†…è”æ ·å¼ã€‚ 4.5.3.6 transition.tsè¿™ä¸ªæ–‡ä»¶å®ç°äº†å¤„ç†è¿‡æ¸¡åŠ¨ç”»çš„æ¨¡å—ï¼Œå®ƒè´Ÿè´£åº”ç”¨è¿‡æ¸¡ç±»ï¼Œç®¡ç†è¿‡æ¸¡çŠ¶æ€ï¼Œå¹¶ç¡®ä¿è¿‡æ¸¡æ•ˆæœæ­£ç¡®åœ°åº”ç”¨äºå…ƒç´ ã€‚ 4.5.4 transition-util.tsè¯¥æ–‡ä»¶åŒ…å«äº† Vue.js åœ¨ Web å¹³å°ä¸Šä¸è¿‡æ¸¡åŠ¨ç”»ç›¸å…³çš„å®ç”¨å·¥å…·å‡½æ•°ã€‚ è¿™äº›å·¥å…·å‡½æ•°ä¸º &lt;transition&gt; å’Œ &lt;transition-group&gt; ç»„ä»¶æä¾›äº†åº•å±‚çš„æ”¯æŒï¼Œä½¿å¾— Vue.js èƒ½å¤Ÿç®¡ç†å’Œæ§åˆ¶å…ƒç´ çš„è¿‡æ¸¡æ•ˆæœã€‚ 4.5.5 patch.tsè¯¥æ–‡ä»¶æ˜¯ Vue.js åœ¨ Web å¹³å°ä¸Šè´Ÿè´£ DOM æ›´æ–°çš„æ ¸å¿ƒæ¨¡å—ã€‚ è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº† patch å‡½æ•°ï¼Œå®ƒæ˜¯ Vue.js æ¸²æŸ“å¼•æ“çš„å…³é”®éƒ¨åˆ†ä¹‹ä¸€ï¼Œç”¨äºå°†è™šæ‹Ÿ DOMï¼ˆVirtual DOMï¼‰æ›´æ–°åˆ°å®é™…çš„ DOM ä¸Šã€‚ ä»–å®é™…ä¸Šå¼•ç”¨äº†core/vdom/patchç›®å½•ä¸‹çš„ createPatchFunctionå‡½æ•°ã€‚ 4.5.6 node-ops.tsè¯¥æ–‡ä»¶åŒ…å«äº† Vue.js åœ¨ Web å¹³å°ä¸Šè¿›è¡Œ DOM æ“ä½œçš„å…·ä½“å®ç°ã€‚ è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æ˜¯ Vue.js æ¸²æŸ“å¼•æ“åœ¨æ›´æ–° DOM æ—¶ä½¿ç”¨çš„å…·ä½“æ“ä½œã€‚å¦‚æ·»åŠ èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ç­‰ã€‚ 4.5.7 class-util.tsè¯¥æ–‡ä»¶åŒ…å«äº† vue åœ¨ webå¹³å°ä¸Šä¸å…ƒç´ ç±»ç›¸å…³çš„ä½¿ç”¨å·¥å…·å‡½æ•°ã€‚ è¿™äº›å·¥å…·å‡½æ•°ç”¨äºå¤„ç†å…ƒç´ çš„ç±»åï¼ŒåŒ…æ‹¬æ·»åŠ ã€åˆ é™¤å’Œåˆ‡æ¢ç±»åç­‰æ“ä½œã€‚ 4.6 compilerç›®å½•è¯¥ç›®å½•åŒ…å«äº† Vue.js åœ¨ Web å¹³å°ä¸Šè¿›è¡Œæ¨¡æ¿ç¼–è¯‘çš„ç›¸å…³å®ç°ã€‚ è¿™ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶å’Œæ¨¡å—è´Ÿè´£å°† Vue æ¨¡æ¿å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯ä»¥è¢« Vue æ¸²æŸ“å¼•æ“æ‰§è¡Œçš„æ¸²æŸ“å‡½æ•°ã€‚ å…¶ä¸­ directivesç›®å½•ä¸‹çš„æ–‡ä»¶ å®šä¹‰äº†ä¸€äº›å†…ç½®æŒ‡ä»¤å¦‚v-htmlã€v-textã€‚ modulesç›®å½•ä¸­å­˜æ”¾äº†å¯¹åº”å¤„ç†æ¨¡æ¿ç¼–è¯‘æ—¶éœ€è¦çš„ä¸€äº›é€šç”¨å¤„ç†æ–¹æ³•ã€‚ å…¶ä½™æ–‡ä»¶ä¸ºé€šç”¨å·¥å…·ç­‰ã€‚ äº”ã€coreæ–‡ä»¶å¤¹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071srcâ”œâ”€core| â”œâ”€config.ts| â”œâ”€index.ts| â”œâ”€vdom| | â”œâ”€create-component.ts| | â”œâ”€create-element.ts| | â”œâ”€create-functional-component.ts| | â”œâ”€patch.ts| | â”œâ”€vnode.ts| | â”œâ”€modules| | | â”œâ”€directives.ts| | | â”œâ”€index.ts| | | â””template-ref.ts| | â”œâ”€helpers| | | â”œâ”€extract-props.ts| | | â”œâ”€get-first-component-child.ts| | | â”œâ”€index.ts| | | â”œâ”€is-async-placeholder.ts| | | â”œâ”€merge-hook.ts| | | â”œâ”€normalize-children.ts| | | â”œâ”€normalize-scoped-slots.ts| | | â”œâ”€resolve-async-component.ts| | | â””update-listeners.ts| â”œâ”€util| | â”œâ”€debug.ts| | â”œâ”€env.ts| | â”œâ”€error.ts| | â”œâ”€index.ts| | â”œâ”€lang.ts| | â”œâ”€next-tick.ts| | â”œâ”€options.ts| | â”œâ”€perf.ts| | â””props.ts| â”œâ”€observer| | â”œâ”€array.ts| | â”œâ”€dep.ts| | â”œâ”€index.ts| | â”œâ”€scheduler.ts| | â”œâ”€traverse.ts| | â””watcher.ts| â”œâ”€instance| | â”œâ”€events.ts| | â”œâ”€index.ts| | â”œâ”€init.ts| | â”œâ”€inject.ts| | â”œâ”€lifecycle.ts| | â”œâ”€proxy.ts| | â”œâ”€render.ts| | â”œâ”€state.ts| | â”œâ”€render-helpers| | | â”œâ”€bind-dynamic-keys.ts| | | â”œâ”€bind-object-listeners.ts| | | â”œâ”€bind-object-props.ts| | | â”œâ”€check-keycodes.ts| | | â”œâ”€index.ts| | | â”œâ”€render-list.ts| | | â”œâ”€render-slot.ts| | | â”œâ”€render-static.ts| | | â”œâ”€resolve-filter.ts| | | â”œâ”€resolve-scoped-slots.ts| | | â””resolve-slots.ts| â”œâ”€global-api| | â”œâ”€assets.ts| | â”œâ”€extend.ts| | â”œâ”€index.ts| | â”œâ”€mixin.ts| | â””use.ts| â”œâ”€components| | â”œâ”€index.ts| | â””keep-alive.ts coreæ–‡ä»¶å¤¹æ˜¯å­˜å‚¨è¿™ vueçš„æ ¸å¿ƒé€»è¾‘ã€‚ 5.1 componentsç›®å½•è¯¥ç›®å½•ä¸‹å­˜æ”¾äº†ä¸€äº›å†…ç½®ç»„ä»¶å¦‚ keep-aliveã€‚ 5.2 global-apiç›®å½•è¯¥ç›®å½•åŒ…å«äº† Vue.jsåœ¨æ ¸å¿ƒå±‚é¢æä¾›çš„å…¨å±€ APIçš„å®ç°ã€‚ å¦‚Vue.mixinã€Vue.useã€Vue.extendç­‰ã€‚ 5.3 instanceç›®å½•è¯¥ç›®å½•åŒ…å«äº† vueå®ä¾‹ç›¸å…³çš„ä¸»è¦å®ç°ã€‚ å…¶ä¸­:render.jsè´Ÿè´£æ¸²æŸ“ç›¸å…³çš„é€»è¾‘ã€lifecycle.jsè´Ÿè´£ç®¡ç† vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€events.jsè´Ÿè´£å¤„ç† vueå®ä¾‹ä¸Šçš„äº‹ä»¶ã€state.jsè´Ÿè´£ç®¡ç† vueå®ä¾‹çš„æ•°æ®çŠ¶æ€ç­‰ã€‚ 5.4 observeç›®å½•è¯¥ç›®å½•åŒ…å«äº† Vue.js ä¸­ç”¨äºå®ç°å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ã€‚ è¿™éƒ¨åˆ†ä»£ç è´Ÿè´£å°†æ•°æ®å¯¹è±¡è½¬æ¢ä¸ºå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œä½¿å¾—æ•°æ®çš„å˜åŒ–èƒ½å¤Ÿè¢«è¿½è¸ªï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ä¾èµ–äºè¯¥æ•°æ®çš„è§†å›¾ã€‚ 5.5 vdomç›®å½•è¯¥ç›®å½•åŒ…å«äº†Vue.js å¤„ç†è™šæ‹Ÿ DOM (Virtual DOM) çš„ç›¸å…³å®ç°ã€‚ è™šæ‹Ÿ DOM æ˜¯ Vue.js æ¸²æŸ“æœºåˆ¶çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒé€šè¿‡å†…å­˜ä¸­çš„ JavaScript å¯¹è±¡æ¥è¡¨ç¤ºçœŸå®çš„ DOM èŠ‚ç‚¹ã€‚ å…­ã€compileræ–‡ä»¶å¤¹è¯¥ç›®å½•å­˜æ”¾äº†vueæ¨¡æ¿ç¼–è¯‘çš„ç›¸å…³å†…å®¹ã€‚ 1234567891011121314151617181920212223srcâ”œâ”€compiler| â”œâ”€codeframe.ts| â”œâ”€create-compiler.ts| â”œâ”€error-detector.ts| â”œâ”€helpers.ts| â”œâ”€index.ts| â”œâ”€optimizer.ts| â”œâ”€to-function.ts| â”œâ”€parser| | â”œâ”€entity-decoder.ts| | â”œâ”€filter-parser.ts| | â”œâ”€html-parser.ts| | â”œâ”€index.ts| | â””text-parser.ts| â”œâ”€directives| | â”œâ”€bind.ts| | â”œâ”€index.ts| | â”œâ”€model.ts| | â””on.ts| â”œâ”€codegen| | â”œâ”€events.ts| | â””index.ts ä¸ƒã€æ€»ç»“æˆ‘ä»¬è¿™ç« å¤§æ¦‚çš„ä»‹ç»äº† vueçš„å¤§ä½“ç›®å½•ç»“æ„ã€‚"},{"title":"äºŒã€Javaè¯­è¨€å‘å±•å†å²","path":"//posts/Javaè¯­è¨€å‘å±•å†å².html","content":"1ã€Javaè¯­è¨€å‘å±•å†å² å‘è¡Œç‰ˆæœ¬ å‘è¡Œæ—¶é—´ å¤‡æ³¨ Java 1995.05.23 SUNå…¬å¸åœ¨ Sun worldä¼šè®®ä¸Šæ­£å¼å‘å¸ƒ Javaå’Œ HotJavaæµè§ˆå™¨ Java1.0 1996.01.23 SUNå…¬å¸å‘éƒ¨äº† Javaçš„ç¬¬ä¸€ä¸ªå¼€å‘å·¥å…·åŒ… Java1.1 1997.02.19 Java1.2 1998.12.08 æ‹†åˆ†æˆï¼šJ2SE(æ ‡å‡†ç‰ˆ)ã€J2EE(ä¼ä¸šçº§)ã€J2ME(å°å‹ç‰ˆ) Java1.3 2000.05.08 Java1.4 2004.02.06 Java5.0 2004.09.30 1.ç‰ˆæœ¬å·ä» 1.4 ç›´æ¥æ›´æ–°è‡³ 5.0ï¼› 2.å¹³å°æ›´åä¸ºJavaSEã€JavaEEã€JavaME Java6.0 2006.12.11 2009.04.20 Oracleå®£å¸ƒæ”¶è´­ SUNå…¬å¸ Java7.0 2011.07.02 Java8.0 2014.03.18 LTSç‰ˆæœ¬ Java9.0 2017.09.22 1.æ¯åŠå¹´æ›´æ–°ä¸€æ¬¡ 2.Java9.0å¼€å§‹ä¸å†æ”¯æŒ window32ä½ç³»ç»Ÿ Java10.0 2018.03.21 Java11.0 2018.09.25 1.JDKå®‰è£…åŒ…å–æ¶ˆç‹¬ç«‹ JREå®‰è£…åŒ…ï¼›2.LTSç‰ˆæœ¬ Java12.0 2019.03.19 Java13.0 2019.09.17 Java14.0 2020.03.17 Java15.0 2020.09.16 Java16.0 2021.03.16 Java17.0 2021.09.14 LTSç‰ˆæœ¬ LTSï¼ˆLong Term Supportï¼‰:é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œä¸‹ä¸€ä¸ª LTSç‰ˆæœ¬ä¸º Java17.0","tags":["blog"],"categories":["Java","JavaåŸºç¡€"]},{"title":"ä¸€ã€è®¡ç®—æœºè¯­è¨€ä»‹ç»","path":"//posts/è®¡ç®—æœºè¯­è¨€ä»‹ç».html","content":"1ã€è®¡ç®—æœºè¯­è¨€æ˜¯ä»€ä¹ˆï¼Ÿæ‰€è°“è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯äººä»¬å¯ä»¥ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å¯¹è®¡ç®—æœºä¸‹è¾¾å‘½ä»¤ï¼Œè®©è®¡ç®—æœºå®Œæˆäººä»¬éœ€è¦çš„åŠŸèƒ½ã€‚ æ¯”å¦‚æ‰“æ¸¸æˆç­‰å°±æ˜¯è¾“å…¥æŒ‡ä»¤è®©è®¡ç®—æœºæ‰§è¡Œã€‚ 2ã€è®¡ç®—æœºè¯­è¨€å‘å±• ç¬¬ä¸€ä»£ï¼šæœºå™¨è¯­è¨€ ä¾‹å¦‚ï¼š0101 ä¸ç›´è§‚ ç¬¬äºŒä»£ï¼šæ±‡ç¼–è¯­è¨€ ä¾‹å¦‚ï¼šåŠ å…¥äº†å•è¯ ç¬¬ä¸‰ä»£ï¼šé«˜çº§è¯­è¨€ é¢å‘è¿‡ç¨‹è¯­è¨€ é¢å‘å¯¹è±¡è¯­è¨€ 3ã€è®¡ç®—æœºè¯­è¨€æ’è¡Œæ¦œä¸‹é¢æ˜¯ 2024 å¹´ 2 æœˆæœ€å—æ¬¢è¿çš„ 10 ç§ç¼–ç¨‹è¯­è¨€ã€‚ 4ã€è®¡ç®—æœºè¯­è¨€èµ°åŠ¿","tags":["blog"],"categories":["Java","JavaåŸºç¡€"]},{"path":"/css/extra.css","content":"/** è®¾ç½®ä¾§è¾¹æ åº•éƒ¨ **/ .social-wrap { display: block; } .social-wrap .social:hover { background-color: #d7beb6 } /** è®¾ç½®å³è¾¹æ  **/ /** å³è¾¹æ ç›®å½•é«˜åº¦è®¾ç½® **/ .l_right .widgets .widget-wrapper.toc .widget-body .toc{ /* max-height: calc(100vh - 500px); */ } .widget-wrapper.toc+.widget-wrapper{ padding-top: 0px; }"}]