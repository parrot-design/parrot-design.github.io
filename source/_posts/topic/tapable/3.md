---
title: ğŸ”¥ä¸‰ã€å¯¹Hookå‡½æ•°è¿›è¡Œåˆ†ç±»
permalink: posts/tapable-category.html
date: 2025-01-21 16:34:44
topic: tapable
banner: /assets/topic/tapable/index.png
references:
---

&nbsp;

{% button è¿”å› javascript:window.history.back() icon:solar:back-white color:orange size:xs %}

{% quot ä¸“æ ç¬¬ä¸‰ç¯‡-å¯¹Hookå‡½æ•°è¿›è¡Œåˆ†ç±» %}

tapable.jsä¸­å­˜åœ¨ä¹ä¸ªé’©å­ï¼š

{% box child:codeblock color:purple %}
```js
const {
	SyncHook,
	SyncBailHook,
	SyncWaterfallHook,
	SyncLoopHook,
	AsyncParallelHook,
	AsyncParallelBailHook,
	AsyncSeriesHook,
	AsyncSeriesBailHook,
	AsyncSeriesWaterfallHook
} = require("tapable");
```
{% endbox %}

# ä¸€ã€æ ¹æ®æ˜¯å¦å¼‚æ­¥è¿›è¡Œåˆ†ç±»

{% image /assets/topic/tapable/category/1.jpg %}

## 1.1 åŒæ­¥

ä»é’©å­åå¯ä»¥çœ‹å‡ºæ¥ï¼šå‰ç¼€æ˜¯Syncçš„ä»£è¡¨æ˜¯åŒæ­¥é’©å­ã€‚

åŒæ­¥é’©å­æ˜¯ä¸€ç§ä¸æ¶‰åŠå¼‚æ­¥æ“ä½œçš„é’©å­ç±»å‹ã€‚

å®ƒä»¬ç”¨äºåœ¨è°ƒç”¨æ—¶ç«‹å³æ‰§è¡Œæ‰€æœ‰æ³¨å†Œçš„ç›‘å¬å‡½æ•°ï¼Œå¹¶ä¸”è¿™äº›ç›‘å¬å‡½æ•°æ˜¯æŒ‰ç…§æ³¨å†Œçš„é¡ºåºä¾æ¬¡æ‰§è¡Œçš„ã€‚

åŒæ­¥é’©å­é€‚ç”¨äºä¸éœ€è¦ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆçš„åœºæ™¯ã€‚

{% box child:codeblock color:purple %}
```js
const { SyncHook } = require('tapable');

// åˆ›å»ºä¸€ä¸ª SyncHook å®ä¾‹
const hook = new SyncHook(['arg1', 'arg2']);

// æ³¨å†Œç›‘å¬å‡½æ•°
hook.tap('FirstPlugin', (arg1, arg2) => {
    console.log('FirstPlugin:', arg1, arg2);
});

hook.tap('SecondPlugin', (arg1, arg2) => {
    console.log('SecondPlugin:', arg1, arg2);
});

// è§¦å‘é’©å­
hook.call('Hello', 'World');
```
{% endbox %}

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ SyncHook è¢«ç”¨æ¥æ³¨å†Œä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼Œå¹¶åœ¨è°ƒç”¨ call æ–¹æ³•æ—¶ä¾æ¬¡æ‰§è¡Œå®ƒä»¬ã€‚è¾“å‡ºç»“æœå°†æ˜¯ï¼š

{% box child:codeblock color:purple %}
```js
FirstPlugin: Hello World
SecondPlugin: Hello World
```
{% endbox %}

## 1.2 å¼‚æ­¥

ä»é’©å­åå¯ä»¥çœ‹å‡ºæ¥ï¼šå‰ç¼€æ˜¯Asyncçš„ä»£è¡¨æ˜¯å¼‚æ­¥é’©å­ã€‚

å¼‚æ­¥é’©å­ç”¨äºå¤„ç†æ¶‰åŠå¼‚æ­¥æ“ä½œçš„åœºæ™¯ã€‚

å¼‚æ­¥é’©å­å…è®¸æ³¨å†Œçš„ç›‘å¬å‡½æ•°ä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼Œè¿™å¯¹äºéœ€è¦ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆçš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚

{% box child:codeblock color:purple %}
```js
const { AsyncSeriesHook } = require('tapable');

// åˆ›å»ºä¸€ä¸ª AsyncSeriesHook å®ä¾‹
const hook = new AsyncSeriesHook(['arg1', 'arg2']);

// æ³¨å†Œå¼‚æ­¥ç›‘å¬å‡½æ•°
hook.tapAsync('FirstPlugin', (arg1, arg2, callback) => {
    setTimeout(() => {
        console.log('FirstPlugin:', arg1, arg2);
        callback();
    }, 1000);
});

hook.tapAsync('SecondPlugin', (arg1, arg2, callback) => {
    setTimeout(() => {
        console.log('SecondPlugin:', arg1, arg2);
        callback();
    }, 1000);
});

// è§¦å‘é’©å­
hook.callAsync('Hello', 'World', () => {
    console.log('All done!');
});
```
{% endbox %}

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ AsyncSeriesHook è¢«ç”¨æ¥æ³¨å†Œä¸¤ä¸ªå¼‚æ­¥ç›‘å¬å‡½æ•°ï¼Œå¹¶åœ¨è°ƒç”¨ callAsync æ–¹æ³•æ—¶ä¾æ¬¡æ‰§è¡Œå®ƒä»¬ã€‚è¾“å‡ºç»“æœå°†æ˜¯ï¼š

{% box child:codeblock color:purple %}
```js
FirstPlugin: Hello World
SecondPlugin: Hello World
All done!
```
{% endbox %}

# äºŒã€æ ¹æ®hookçš„åŠŸèƒ½è¿›è¡Œåˆ†ç±»